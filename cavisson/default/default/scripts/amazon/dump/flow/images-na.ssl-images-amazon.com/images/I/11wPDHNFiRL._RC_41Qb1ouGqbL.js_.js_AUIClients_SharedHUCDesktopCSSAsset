(function(f){var e=window.AmazonUIPageJS||window.P,l=e._namespace||e.attributeErrors,h=l?l("SharedHUCAsset",""):e;h.guardFatal?h.guardFatal(f)(h,window):h.execute(function(){f(h,window)})})(function(f,e,l){f.when("A").register("HUC",function(h){return{makeAjaxCall:function(g,f,k,e,c,d){return h.$.ajax({type:"POST",url:g,data:f,cache:!1,dataType:"json",beforeSend:function(a,b){c&&c(a,b)},success:function(a,b){k&&k(a)},error:function(a,b){e&&e(a,b)},complete:function(a,b){d&&d()}})}}});"use strict";
f.when("A").register("huc-page-state",function(h){var g=h.$;return{updatePageState:function(){if(h.capabilities.history){var f=e.location.href,k;(k=g("#huc-page-state").data("url"))&&f!==k&&e.history.replaceState({url:k,type:"huc"},e.document.title,k)}}}});f.when("huc-page-state","ready").execute(function(h){h.updatePageState()});"use strict";f.when("A","jQuery","ready").register("huc-common-util",function(h,g){function f(){var c=[];g(".warranty-hidden-info").each(function(a,b){c[a]="warranty-"+g(b).data("baseAsin")});
Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1});g(".huc-v2-box-warranty").each(function(a,b){-1===c.indexOf(g(b).find(".hlb-warranty").attr("id"))&&g(b).remove()});var d=g("#huc-v2-message-group");0===d.children().length&&d.remove()}var k,e={};return{appendRefPrefix:function(c){"undefined"===typeof k&&(k=g("#refTagPrefix").val()||"");return k+c},preventEventTrigger:function(c,d){return c?e[c]?e[c]:(e[c]=!0,setTimeout(function(){e[c]=
!1},d||200),!1):!1},purifyPage:function(){f()},refreshElements:function(c,d,a){if(c&&d){(a="string"===typeof a?g(a):a)&&a.length||(a=g("body"));for(var b in d)d.hasOwnProperty(b)&&(c[b]=a.find(d[b]));c.rootNode=a;return c}},truncateWithEllipsis:function(c,d){var a=g.trim(d.text());if(0!==a.length&&"..."!==a.substr(-1)){c=c*parseInt(d.css("font-size").replace(/[a-z]/gi,""),10)*1.255;var b=a;if(!/[\u3400-\u9FBF]/.test(a))for(var e=a.split(" "),f=e.length;!(d.height()<=c)&&1<f--;)""!==e[f]&&(b=e.slice(0,
f).join(" ")+"...",d.text(b));for(;!(d.height()<=c)&&0<b.length;)b=b.substr(0,b.length-1),d.text(b+"...");d.is("a")&&a!==b&&d.attr("title",a)}},isIE:function(){var c=document.documentElement.style,d="MozAppearance"in c;return!d&&!(!d&&"webkitAppearance"in c)&&(0===navigator.appName.indexOf("Microsoft")||-1<navigator.userAgent.indexOf("Trident/"))}}})});
/* ******** */
(function(e){var p=window.AmazonUIPageJS||window.P,y=p._namespace||p.attributeErrors,c=y?y("SharedHUCDesktopAsset",""):p;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,p,y){e.when("A","jQuery","ready").register("MiniDetail",function(c,a){function m(b,c){var h=c.index;b.$declarativeParent.parents(".mini-detail-wrap").find(".sc-toggle-thumb").each(function(){a(this).data("imgIndex")===h?a(this).hasClass("a-hidden")&&a(this).removeClass("a-hidden"):a(this).hasClass("a-hidden")||
a(this).addClass("a-hidden")})}c.declarative("sc-thumb-action","mouseenter",function(b){b.$declarativeParent.parents(".mini-detail-wrap").find("[data-action\x3dsc-thumb-action]").each(function(){a(this).find(".a-button.a-button-thumbnail").removeClass("a-button-selected")});b.$declarativeParent.find(".a-button.a-button-thumbnail").addClass("a-button-selected");m(b,b.data)})});"use strict";e.when("A","a-popover-manager","ready").execute(function(){e.when("A","a-popover-base").register("sc-click-popover",
function(c,a){function m(q,d){var f=a.get(q.$declarativeParent),g=1;"showCloseButton"in d&&(g=d.showCloseButton);b(f);a.show({$trigger:q.$declarativeParent,header:d.header,showCloseButton:g,content:d.content,width:d.width,height:d.height,position:d.position||"triggerVertical",url:d.url,ajaxFailMsg:d.ajaxFailMsg,cache:"false"===d.cache||!1===d.cache?!1:!0,data:d.data,name:d.name,skin:h,update:n,hide:function(){var a=this;a.animating=!0;c.fadeOut(this.$popover,250);c.delay(function(){a.animating=!1},
250)}})}function b(a){a&&a.destroyTimer&&(clearTimeout(a.destroyTimer),a.destroyTimer=null)}var f=c.$,h=function(a,b){var c="";b.showCloseButton&&(c='\x3cbutton data-action\x3d"a-popover-close" class\x3d"a-button-close a-declarative sc-close-button"\x3e\x3ci class\x3d"a-icon a-icon-close"\x3e\x3c/i\x3e\x3c/button\x3e');var g=b.header,c=g?['\x3cdiv class\x3d"a-popover-header"\x3e',"\x3ch4\x3e"+g+"\x3c/h4\x3e",c,"\x3c/div\x3e"].join("\n"):["\x3cdiv\x3e",c,"\x3c/div\x3e"].join("\n"),g=b.width;b=b.height;
return['\x3cdiv class\x3d"a-popover sc-click-popover"\x3e\n\x3cdiv class\x3d"a-popover-wrapper"',g||b?['style\x3d"',b?"height:"+b+"px;":"",g?"width:"+g+"px;":"",'"'].join(" "):"","\x3e",c,'\x3cdiv class\x3d"a-popover-inner"\x3e',a,'\x3c/div\x3e\n\x3cdiv class\x3d"a-arrow-border"\x3e\n\x3cdiv class\x3d"a-arrow"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e'].join("\n")},n=function(a){"string"===typeof a?f(".a-popover-inner",this.$popover).html(a):a&&f(".a-popover-inner",this.$popover).html("").append(a)};
c.declarative("sc-click-popover","click",function(a){m(a,a.data)})})});e.when("a-popover-data","ready").execute(function(){e.when("A","a-popover","huc-common-util","a-tooltip").register("sc-click-popover",function(c,a,m){function b(a){var b=a.popover;a=b.$popover;b.attrs("fromOrderRow")&&(b=q("#huc-v2-order-row-with-divider").data("isPinned")?"fixed":"absolute",a.css("position",b),"fixed"===a.css("position")&&(b=parseInt(a.css("top"),10)-l.scrollTop(),a.css("top",b)))}function f(a){if(!a)return null;
d.hasOwnProperty(a)||(d[a]={hasFailedContent:!1});return d[a]}function h(b){var c=f(b.popover.attrs("name"));c&&c.hasFailedContent&&(a.remove(b.popover),c.hasFailedContent=!1)}function n(a){if(a=f(a.popover.attrs("name")))a.hasFailedContent=!0}var q=c.$,d={},l=q(p);c.declarative("sc-click-popover","click touchend",function(g){var d=g.data||{};if(m.preventEventTrigger("show-huc-popover-"+d.name,500))g.$event.stopPropagation();else{var k;k=g.$declarativeParent;var f=a.get(k);f||(f=d||{},d=f.name,f=
a.create(k,f),c.on("a:popover:ajaxFail:"+d,n),c.on("a:popover:afterHide:"+d,h),c.on("a:popover:afterUpdatePosition:"+d,b),f.attrs({activate:"onclick"}));k=f;k&&(k.isActive()?(k.hide(),g.$event.preventDefault()):k.show())}})})});e.when("A","huc-common-util","ready").execute(function(c,a){var m=c.$;(function(){m("#hl-cart").delegate("#hlb-imb li a","click",function(a){m.event.fix(a).preventDefault();m(this).removeAttr("href")})})();a.purifyPage()});e.when("A","jQuery","nav.setCartCount","a-modal","a-dropdown",
"ready").execute(function(c,a,m,b,f){function h(a){var b=c.trim(a.val());/^0+/.test(b)?(q(a),a.val("")):/^\d+$/.test(b)?(a.val(n(b)),b=a.closest(".sc-action-quantity").data("old-value"),a.val()!==b?a.closest(".sc-action-quantity").find(".sc-update-link").removeClass("a-hidden"):q(a)):q(a)}function n(a){if(/^0{2,}/.test(a))return"0";var b=/^0+(\d+)/;return b.test(a)?a.replace(b,"$1"):a}function q(a){a.closest(".sc-action-quantity").find(".sc-update-link").addClass("a-hidden")}function d(a){var b=a.closest(".sc-action-quantity").data("old-value");
a.val(b)}function l(c,d){e||(e=!0,r.resetUEForAJAXRequest(),a.ajax({type:"GET",url:"/gp/huc/ajax-handler/modify-addon-qty.html",cache:!1,dataType:"json",data:{scopeIn:g("hucArgsScope"),viewIDIn:g("hucArgsViewID"),newItemsStrIn:g("hucArgsNewItems"),increasedItemsStrIn:g("hucArgsIncreasedItems"),itemidIn:c.data("itemid"),quantityIn:d},beforeSend:function(a,b){u()},success:function(d){r.setStartTimeForAJAXRequest();r.setIDForAJAXRequest(d.requestId);if(d.closeAddonPopover){var g=b.get("addon-modal");
g&&g.isActive()&&g.hide()}d.addonPopoverHTML&&(g=d.addonPopoverHTML,a("#addon-popover-wrapper").replaceWith(g.featureHTML));if(d.addonReminderPopoverHTML){var g=d.addonReminderPopoverHTML,k=a("#popover-place-holder");k.length?k.replaceWith(g.featureHTML):a(document.body).append(g.featureHTML)}d.pantryPopoverHTML&&(g=d.pantryPopoverHTML,a("#pantry-popover-wrapper").replaceWith(g.featureHTML));d["total-cart-items"]&&m(d["total-cart-items"]);d.subcartHTML&&(g=d.subcartHTML,k=a("#huc-msg-boxs"),k.length||
(k=a("#hlb-subcart")),k.replaceWith(g.featureHTML));d.subcartButtonHTML&&(g=d.subcartButtonHTML,k=a("#huc-v2-subcart-buttons-wrapper"),k.length&&k.replaceWith(g.featureHTML));d.warningBoxHTML&&(g=d.warningBoxHTML,k=a("#huc-v2-box-warning"),k.length&&k.replaceWith(g.featureHTML));d.infoBoxHTML&&(g=d.infoBoxHTML,k=a("#huc-v2-box-info"),k.length&&k.replaceWith(g.featureHTML));d.pantryBoxHTML&&(g=d.pantryBoxHTML,k=a("#huc-v2-box-pantry"),k.length&&k.replaceWith(g.featureHTML));d.limitedQuantityBreached&&
a("."+c.data("itemid")+" .quantity").addClass("limitedQuantityBreached");d.quantityUpdateErrorMessageHTML&&a("."+c.data("itemid")+" .hlb-scarcity").after(d.quantityUpdateErrorMessageHTML);d.bottomOrderRowHTML&&(g=d.bottomOrderRowHTML,k=a("#huc-v2-bottom-order-row-with-divider"),k.length&&k.replaceWith(g.featureHTML));d.cartServiceError&&(d=c.data("old-value"),9<d?c.find("input.sc-quantity-textfield").val(d):(g=c.find("input.sc-quantity-textfield"),g.hide(),q(g),a("."+c.data("itemid")+" select").parent().show(),
f.getSelect(a("."+c.data("itemid")+" select")).setValue(d)));r.cfLoadedForAJAXRequest()},error:function(a,b,d){},complete:function(a,b){k();e=!1;r.pageLoadedForAJAXRequest()}}))}function g(b){return b&&a("#"+b).val()||""}function u(){a(".sc-action-quantity select").each(function(a){f.getSelect(this).update({status:"disabled"})});a(".a-button:not(.a-button-disabled)").addClass("a-button-disabled")}function k(){a(".sc-action-quantity select").each(function(a){f.getSelect(this).update({status:"normal"})});
a(".a-button").removeClass("a-button-disabled")}var r=p.CartPerf||{};a(document).delegate(".sc-update-link","click",function(b){b=a(this);var d=b.closest(".sc-action-quantity").find(".sc-quantity-textfield").val();l(b.closest(".sc-action-quantity"),d)});a(document).delegate(".sc-quantity-textfield","focus",function(b){b=a(this);1>c.trim(b.val()).length&&d(b);h(b)});a(document).delegate(".sc-quantity-textfield","keydown",function(b){b=a.event.fix(b);return 48<=b.which&&57>=b.which||96<=b.which&&105>=
b.which||8===b.which||46===b.which||9===b.which});a(document).delegate(".sc-quantity-textfield","keyup",function(b){13===a.event.fix(b).which?(b=a(this),""!==b.val()&&l(b.closest(".sc-action-quantity"),b.val())):h(a(this))});a(document).delegate(".sc-quantity-textfield","input",function(b){h(a(this))});a(document).delegate(".sc-quantity-textfield","blur",function(b){b=a(this);1>c.trim(b.val()).length&&d(b)});c.on("a:dropdown:selected:sc-quantity",function(b){var d=a(b.selectNode),c=d.closest(".sc-action-quantity");
"10"===b.value?(d.parent().hide(),b=c.find("input.sc-quantity-textfield"),b.show().focus(),b.select()):l(c,b.value)});var e=!1});e.when("A","cf").register("imb-expander-metrics",function(c){function a(){c.post("/gp/huc/ajax-handler/log-marker.html?tag\x3dimb_expand");c.off("a:expander:huc-imb-expander:toggle:expand",a)}c.on("a:expander:huc-imb-expander:toggle:expand",a)});e.when("A","jQuery","a-modal","ready").execute(function(c,a,m){c.declarative("huc-modal-precheck","click",function(b){var c=a("#popup-on-ptc"),
h=a("body");"addon-sfl-modal"===b.data.name&&(b=h.data("addonSFLModalHitCount")||0,b++,1<b?m.remove(c):h.data("addonSFLModalHitCount",b))})});"use strict";e.when("A","ready").register("huc-gift-checkbox",function(c){function a(a){a.preventDefault();a.stopPropagation()}function m(b,c,k){e.when("HUC").execute(function(f){p.CartPerf.resetUEForAJAXRequest();f.makeAjaxCall(k,c,function(a){p.CartPerf.setStartTimeForAJAXRequest();p.CartPerf.setIDForAJAXRequest(a.requestId);"OK"===a.status&&(a=b.is(":checked")?
1:0,d&&0<d.length&&(a?d.hide():d.show()));p.CartPerf.cfLoadedForAJAXRequest();e.when("CheckoutPrefetch").execute(function(a){a.initiateAndStorePurchase()})},function(a,b){},function(){e.when("CheckoutPrefetch").execute(function(a){a.clearHUCPTCInitiateId()});b.prop("disabled",!0);l.find("input").prop("disabled",!0);l.find("a").addClass("locked").bind("click",a)},function(){b.prop("disabled",!1);l.find("input").prop("disabled",!1);l.find("a").removeClass("locked").unbind("click",a);p.CartPerf.pageLoadedForAJAXRequest()})})}
var b=c.$,f=b("#gcData"),h="1"===f.attr("enableRememberMe")?!0:!1,n="1"===f.attr("enabledEWCClickModel")?!0:!1,q="1"===f.attr("isFromLightBox")?!0:!1,d=b("#hlb-cart-rogue"),l=b("#hl-cart").find("span.a-button");1>l.length&&(l=b("#huc-v2-subcart-buttons-wrapper").find("span.a-button"));h&&(h=b("span.hlb-checkout-button a").attr("href"))&&0<h.length&&0<=h.indexOf("https")&&(h=0<h.indexOf("?")?h+"\x26hasWorkingJavascript\x3d1":h+"?hasWorkingJavascript\x3d1",b("span.hlb-checkout-button a").attr("href",
h));f.attr("giftText")&&0<f.attr("giftText").length&&b(".giftableItem").each(function(){var a=b(this),d;if("1"===a.attr("suppresscheckbox"))d=b(".hlb-gift-no-checkbox-cb-template").clone(),d.attr("class","hlb-gift-no-checkbox-cb");else{d=b(".hlb-gift-cb-template").clone();d.attr("class","hlb-gift-cb");var c=d.find("input[type\x3dcheckbox]");c.attr({id:"wrap-"+a.attr("asin"),name:"wrap-"+a.attr("asin"),itemid:a.attr("itemId"),reftagsuffix:a.attr("refTagSuffix")});"1"===a.attr("wrapped")&&c.attr("checked",
"checked")}d.appendTo("div#gift-option-"+a.attr("itemId")).fadeIn("slow");"1"===b.trim(a.attr("isShowKindleGiftLearnMore"))?b(".hlb-kindle-gift-learn-more-template").clone().attr("class","hlb-kindle-gift-learn-more").appendTo(d.find("label .a-checkbox-label")).fadeIn("slow"):"1"===b.trim(a.attr("isShowGLMPopover"))&&b(".hlb-gift-learn-more-template").clone().attr("class","hlb-gift-learn-more").appendTo(d.find("label .a-checkbox-label")).fadeIn("slow")});b(".nonGiftableItem").each(function(){b(".hlb-no-gift-cb-template").clone().attr("class",
"hlb-no-gift-cb").appendTo("div#gift-option-"+b(this).attr("itemId")).fadeIn("slow")});b("#hl-items .hlb-gift-cb").show().find("input").bind("click",function(){var a=b(this),d={ref:a.attr("reftagsuffix"),asin:a.attr("id")?a.attr("id").substr(5):"",itemId:a.attr("itemid"),wrap:a.is(":checked")?1:0};m(a,d,"/gp/huc/wrap.html")});b("body").delegate("#huc-v2-gifting-container #huc-v2-order-row-mark-gift input","click",function(){var a=b(this),d=b(".huc-v2-order-row-item").data(),d={asin:d.asin,itemId:d.itemid,
wrap:a.is(":checked")?1:0};m(a,d,"/gp/huc/wrap.html")});!n&&!q&&0<b("#hlb-page-container").length&&0<b("#hlb-message-form").length&&e.when("nav.overrideCartButtonClick").execute(function(a){a(function(){var a=b("#hlb-message-form"),d=a.attr("action");d&&!/ref=gno_cart/.test(d)&&a.attr("action",d.replace(/ref=.*?$/,"ref\x3dgno_cart"));a.submit();return!1})});c.declarative("huc-set-order-gift",["change"],function(a){a=b("#huc-order-gift-checkbox");if(!(1>a.length)){var d={wrap:a.is(":checked")?1:0};
m(a,d,"/gp/huc/ajax-handler/set-order-gift.html")}})});"use strict";e.when("A","jQuery","ready").register("pantry-pop-metrics",function(c,a){c.on("a:popover:show:pantry-modal",function(){if(a("#pantry-popover-wrapper").length){var c=p.ue;if("undefined"!==typeof c&&"undefined"!==typeof c.count){var b=c.count("pantryDesktopHUCPopoverCount");isNaN(b)&&(b=0);c.count("pantryDesktopHUCPopoverCount",b+1)}}})});"use strict";e.when("A","ready").execute("CartAddonReminderModalController",function(c){function a(a,
b){n(a).each(function(){var a=n(this).find("input[type\x3dcheckbox]").prop("checked");b!==a&&n(this).find("input[type\x3dcheckbox]").prop("checked",!a)})}function m(a,b){return a.replace(/%(\d+)/g,function(a,c){return b[--c]})}function b(){var a=0;n("#addon-sfl-popover-wrapper .sc-addon-reminder-include-item input[type\x3dcheckbox]").each(function(){if(n(this).is(":checked")){var b=n(this).val(),b=n(".sc-addon-reminder-item-section[data-itemid\x3d"+b+"]");b.length&&(b=parseInt(b.attr("data-quantity"),
10),isNaN(b)||(a+=b))}});return a}function f(a){var b=n("#sc-addon-sfl-selected-qty-many-source").text();n("#sc-addon-sfl-selected-qty-many").text(m(b,[a]));var b=1===a,c=1<a;h("#sc-addon-sfl-selected-qty-none",1>a);h("#sc-addon-sfl-selected-qty-one",b);h("#sc-addon-sfl-selected-qty-many",c)}function h(a,b){b?n(a).removeClass("a-hidden"):n(a).addClass("a-hidden")}var n=c.$;c=n(document);c.delegate("#addon-sfl-popover-wrapper .sc-addon-reminder-summary","change",function(c){c=n("#addon-sfl-popover-wrapper .sc-addon-reminder-summary").find("input[type\x3dcheckbox]").prop("checked");
a("#addon-sfl-popover-wrapper .sc-addon-reminder-include-item",c);c=b();f(c)});c.delegate("#addon-sfl-popover-wrapper .sc-addon-reminder-include-item","change",function(c){c=b();a("#addon-sfl-popover-wrapper .sc-addon-reminder-summary",1<=c);f(c)})});"use strict";e.when("A","a-modal","a-checkbox","ready").register("si-huc",function(c,a,m){var b=c.$,f=c.state("si-huc-info");if(f){var h=f.baseAsin,n,q=f.configExpWeblab||"",d=f.casData,l=function(){b("#hlb-ptc-btn-native").unbind("click.siptc");document.getElementById("hlb-ptc-btn-native").click()},
g=function(){var a={impression:"i",yes:"y",no:"n",optout_hidden:"oh",optout_yes:"oy",optout_no:"on"},c=function(b,c){b=["psd_hi",a[b],h,n].join("_");c&&(b+="?isAdding\x3d"+(c.isAdding?1:0),c.serviceAsin&&c.quantity&&(b+="\x26serviceAsin\x3d"+c.serviceAsin+"\x26quantity\x3d"+c.quantity));return b};return{log:function(a,d){a="/gp/huc/ajax-handler/log-si-reftag.html/ref\x3d"+c(a,d);b.get(a)},getRef:c}}(),u=function(a){var b=m("#optOutSi");1!==b.size()?(g.log("optout_hidden"),a()):b.isChecked()?(g.log("optout_yes"),
c.post("/gp/si/util/opt-out.html",{params:{sid:f.sessionId,rid:f.requestId},success:function(){a()},error:function(b,c,d){p.ueLogError&&p.ueLogError({message:"[hlcx-si] ajax call in huc si opt out failed. statusText:"+c+" errorThrown: "+d},{logLevel:"ERROR",attribution:"services_interstitial_huc"});a()},timeout:1E3})):(g.log("optout_no"),a())},k=function(){c.ajax("/gp/si/util/get-services.html",{method:"get",params:{asin:h,offerID:f.offerId,limitForMAP:0,experimentWeblab:q,ri:f.requestId},success:function(c){if(c.services&&
1<c.services.length&&c.services[0]){c=c.services[0];n=c.asin;c="/gp/si/aui-si-pop.html/ref\x3d"+g.getRef("impression")+"?ie\x3dUTF8\x26ba\x3d"+h+"\x26ca\x3d"+JSON.stringify(c)+"\x26ri\x3d"+f.requestId+"\x26siHuc\x3d1\x26optout\x3d"+f.optOutEnabled;c={name:"services-modal",header:f.header,url:c,width:"685"};var d=b("#services-modal-trigger");a.create(d,c).show()}else l()},error:function(){l()}})},r=!1,v=function(a){if(r)return a.stopImmediatePropagation(),!1;r=!0;if(!b(".hlb-warranty").find("input").prop("checked"))return a.stopImmediatePropagation(),
k(),!1},w=!1,x=function(){w||(w=!0,g.log("yes",{isAdding:!0,serviceAsin:n,quantity:f.quantity}),e.when("HUC").execute(function(a){var b={serviceAsin:n,quantity:f.quantity};f.baseItemCartId&&(b.baseItemCartId=f.baseItemCartId);CartPerf.resetUEForAJAXRequest();a.makeAjaxCall("/gp/huc/ajax-handler/si-add-service.html",b,function(a){a=a.rid;CartPerf.setStartTimeForAJAXRequest();CartPerf.setIDForAJAXRequest(a);CartPerf.cfLoadedForAJAXRequest();f.prefetchEnabled?c.trigger("huc:ajax:after"):e.when("CheckoutPrefetch").execute(function(a){a.initiateAndStorePurchase()})},
void 0,function(){f.prefetchEnabled?c.trigger("huc:ajax:before"):e.when("CheckoutPrefetch").execute(function(a){a.clearHUCPTCInitiateId()})},function(){l()})}))},z=function(){g.log("no");l()},B=function(){d&&d.required&&d.link&&0===d.link.indexOf("http")&&b("#hlb-ptc-btn-native").attr("href","javascript:void(0);").bind("click.prefetch",function(){setTimeout(function(){p.location.href=d.link},20)})},A=function(){b("#hlb-ptc-btn-native").bind("click.siptc",v)};0<b("#popup-on-ptc").length||(b("#hlb-ptc-btn-native").hasClass("prefetch-click-bound")?
(A(),b("#hlb-ptc-btn-native").unbind("click.prefetch"),B()):A(),b(document.body).delegate("#siAddCoverage","click",function(){u(x)}),b(document.body).delegate("#siNoCoverage","click",function(){u(z)}),c.on("a:popover:hide:services-modal",function(){u(z)}),c.on("a:popover:ajaxFail:services-modal",l))}});"use strict";e.when("A","ready").register("subcart-view",function(c){var a=c.$;c.declarative("huc-view-cart",["click"],function(c){var b=c.data&&c.data.formID&&a("#"+c.data.formID);b.length&&(c.$event.preventDefault(),
b.submit())})});e.when("A","a-popover","a-tooltip","huc-common-util","sc-click-popover","ready").register("recent-change-popover",function(c,a,m,b){function f(a){a.length&&(a=a.closest(".huc-v2-msg-group").find(".a-expander-content-expanded").not(a),a.length&&a.parent().find(".huc-v2-item-msg").click())}function h(a,b){b=("loading"===b?e.itemLoading:e.itemSorry).clone().removeAttr("id").removeClass("huc-hidden");a.html("").append(b)}function n(){var a=m.get(e.imbTipsTrigger);a&&a.hide()}function q(){var b=
a.get(e.popoverTrigger);if(b){var c=b.$popover,b=e.msgList.find(".huc-v2-msg-group:visible").find(".huc-v2-item-messages"),d=b.height();b.data("originHeight")||b.data("originHeight",d);var f=b.data("originHeight"),g=l.scrollTop()+l.height(),c=c.offset().top+c.outerHeight()-g,c=d-c;c>=f?c="auto":10>c&&(c=10);d!==c&&b.height(c)}}var d=c.$,l=d(p),g=p.CartPerf||{},e={};b.refreshElements(e,{imbStatus:"#shouldOpenIMB",imbTabs:"#huc-imb-tabs",itemLoading:"#huc-imb-item-loading",itemSorry:"#huc-imb-item-sorrry",
msgList:"#huc-imb-msg-list",popoverTrigger:"#huc-imb-popover-action",imbTipsTrigger:"#huc-imb-tips-action"});c.declarative("huc-show-msg-group",["click"],function(a){var b=a.$currentTarget.find(".a-button");b.is(".a-button-selected")||(e.imbTabs.find(".a-button").filter(".a-button-selected").removeClass("a-button-selected"),b.addClass("a-button-selected"),b=e.msgList.find(".huc-v2-msg-group"),b.filter(":visible").addClass("huc-hidden"),b.filter("#"+a.data.category).removeClass("huc-hidden"),q())});
c.declarative("huc-show-imb-item-detail",["click"],function(a){var b=a.$currentTarget.closest(".a-expander-container").find(".a-expander-content");if(b.hasClass("a-expander-content-expanded")){f(b);var c=b.data("status");a.data.url&&2!==c&&3!==c&&(g.resetUEForAJAXRequest(),d.ajax({cache:"false",dataType:"json",type:"GET",url:a.data.url,beforeSend:function(){h(b,"loading");b.data("status",2)},error:function(){h(b,"error");b.data("status",1)},success:function(a){a?(g.setStartTimeForAJAXRequest(),g.setIDForAJAXRequest(a.requestId),
b.data("status",3),b.html(a.htmlContent),g.cfLoadedForAJAXRequest()):h(b,"error")}}))}});c.on("a:popover:afterShow:huc-imb-popover",q);1===parseInt(e.imbStatus.val(),10)&&(e.imbTipsTrigger.trigger("click"),setTimeout(n,3E3))});e.when("A","subcart-view","cf").register("imb-popover-show-metrics",function(c){function a(){var e=1===parseInt(c.$("#shouldOpenIMB").val(),10)?"imb_open_by_default":"imb_open_by_click";c.post("/gp/huc/ajax-handler/log-marker.html?tag\x3d"+e);c.off("a:popover:show:huc-imb-popover",
a)}c.on("a:popover:show:huc-imb-popover",a)});"use strict";e.when("A","huc-common-util","ready").register("huc-checkout-prefetch",function(c,a){var e=c.$,b=!1,f={},h={casUrl:"#cas-url",prefetchUrl:"#checkout-prefetch-url"};(function(){e("#hlb-ptc-btn-bottom").unbind("mouseover").bind("mouseover",function(a){a.preventDefault();e("#hlb-ptc-btn").trigger("mouseover")});e("#hlb-ptc-btn-bottom").unbind("click").bind("click",function(a){a.preventDefault();e("#hlb-ptc-btn-native")[0].click()});a.refreshElements(f,
h);var b=f.casUrl.val();if(b){var c=document.getElementsByTagName("head")[0];if(c){var d=document.createElement("script");d.src=b;d.onload=function(){d.parentNode&&c.removeChild(d)};d.onerror=function(a){p.console&&p.console.log("suppressed script error")};c.appendChild(d)}}})();return{casCallBack:function(a){if(a&&a.required){var h=e("#hlb-ptc-btn");h.unbind("mouseover").bind("mouseover",function(){0<e("#services-modal-trigger").length||b||(c.preload(f.prefetchUrl.val()+"?siteState\x3disRegularCheckout.1\x26onClickPTC\x3d1"),
b=!0)});h.find("a").addClass("prefetch-click-bound").attr("href","javascript:void(0);").bind("click.prefetch",function(){setTimeout(function(){p.location.href=a.link},20)})}}}});"use strict";e.when("A","huc-common-util","ready").register("huc-rec-upsell",function(c,a){function e(a){var b=k(a.currentTarget).find(".huc-v2-upsell-item-image img");f(a,b)}function b(a){var b=k(a.currentTarget);f(a,b)}function f(b,c){if(0!==c.length){var f=b.type;b=k(b.currentTarget);var e=b.find(".huc-v2-upsell-item-slide");
if(e.length){var m=e.outerWidth(),r=e.outerHeight();if("mouseenter"===f||"focusin"===f){if(!x){x=!0;var t=q(c,e);d(e,t);(f=c.attr("data-anchor-id"))&&k("#"+f)&&(c=k("#"+f));f=c.offset().left-b.offset().left;b=c.width()-m;c=t?n(c,p())+f+b+1:n(c,"padding-"+v)+f-1;w?e.css(v,(t?c+m:c-m)+"px").show():(e.css(v,c+"px"),h(e,0,m,r,m),e.show().stop(!1).animate(l(t,m),{step:function(a,b){b=a-b.start;a=t?m-b:0;b=t?m:-b;h(k(this),0,b,r,a)},duration:100,easing:"swing"}));e.find(".huc-upsell-max-2-lines").each(function(){a.truncateWithEllipsis(2,
k(this))})}}else if("mouseleave"===f||"focusout"===f)x=!1,w?e.hide():(t=g(c.offset().left>e.offset().left),e.stop(!1).animate(l(t,m),{step:function(a,b){b=a-b.start;a=t?0:-b;b=t?m-b:m;h(k(this),0,b,r,a)},duration:100,easing:"swing",complete:function(){e.hide()}}))}}}function h(a,b,c,d,f){a.css("clip","rect("+b+"px, "+c+"px, "+d+"px, "+f+"px)")}function n(a,b){return parseInt(a.css(b),10)}function q(a,b){a=a.offset().left+a.width()+n(a,p())+b.outerWidth()+10;b=k("#huc-page-container").outerWidth(!0);
return g(a<b)}function d(a,b){var c=a.css("padding-"+v),d=a.css(p()),f=parseInt(c,10),e=parseInt(d,10);if(b&&f>e||!b&&e>f)a.css("padding-"+v,d),a.css(p(),c);b?a.removeClass("left-border").addClass("right-border"):a.removeClass("right-border").addClass("left-border")}function l(a,b){return r?{right:(a?"+\x3d":"-\x3d")+b+"px"}:{left:(a?"+\x3d":"-\x3d")+b+"px"}}function g(a){return r?!a:a}function p(){return"padding-"+(r?"left":"right")}var k=c.$,r=c.capabilities.rtl,v=r?"right":"left",w=a.isIE()&&!c.capabilities.isIE10Plus,
x=!1;(function(){k(document).delegate(".huc-upsell-big-face-box-inner","mouseenter mouseleave focusin focusout",e);k(document).delegate(".huc-upsell-mix-face-box","mouseenter mouseleave focusin focusout",b);k(document).delegate(".huc-upsell-max-1-line","mouseenter",function(){var a=k(this);this.offsetWidth<this.scrollWidth&&!a.attr("title")&&a.attr("title",a.text())})})()});"use strict";e.when("A").register("huc-order-row",function(c){function a(a){a=a.popover;a.attrs("isAjaxFail")&&a.refresh()}var e=
c.$;e(p);(function(){e(".huc-v2-order-row-image-box").each(function(){var b=e(this).attr("id");b!==y&&(b="mini-item-"+b.substr(22),c.on("a:popover:ajaxFail:"+b,function(a){a.popover.attrs("isAjaxFail",!0)}),c.on("a:popover:ajaxSuccess:"+b,function(a){a.popover.attrs("isAjaxFail",!1)}),c.on("a:popover:beforeShow:"+b,a))})})()});"use strict";e.when("A","jQuery").execute(function(c,a){function m(c){var e=a("#hlb-subcart"),d=a("#hlb-bottom-subcart");e.find("span.huc-subtotal").replaceWith(c.subtotal);
d.find("span.huc-subtotal").replaceWith(c.subtotal);a("#hlb-ptc-btn.hlb-checkout-button.huc-button-large").find("a").text(c.pctButtonText);a("#hlb-ptc-btn-bottom.hlb-checkout-button.huc-button-large").find("a").text(c.pctButtonText);a("#hlb-ship-message").replaceWith(c.shipMessage);a("#hucSnsRecurrencePeriodLabel").html(f.displayString);b(parseInt(c.totalQuantity,10))}function b(a){e.when("nav.setCartCount").execute(function(b){b(a)})}var f=null,h;c.on("a:accordion:sns-accordion:select",function(b){b=
a(b.selectedRow.$row[0]);f={value:b.data().value,displayString:b.data().displaystring}});c.on("a:popover:beforeShow:popover_sns",function(a){h=a.popover.data.itemId;f=null});c.on("a:popover:beforeHide:popover_sns",function(b){if(null!==f&&h){var c=a("#sns-spin-img"),d=a("#sns-information");b={itemID:h,recurrencePeriodValue:f.value};e.when("HUC").execute(function(a){a.makeAjaxCall("/gp/huc/ajax-handler/sns.html",b,function(a){"OK"===a.status?(m(a),0===f.value?(c.replaceWith(""),d.replaceWith("")):
(c.addClass("a-hidden"),d.removeClass("a-hidden"))):(c.addClass("a-hidden"),d.removeClass("a-hidden"));e.when("CheckoutPrefetch").execute(function(a){a.initiateAndStorePurchase()})},function(a,b){c.addClass("a-hidden");d.removeClass("a-hidden")},function(a){c.removeClass("a-hidden");d.addClass("a-hidden")},function(){})})}})});"use strict";e.when("A","jQuery","huc-common-util","a-popover","a-tooltip","ready").register("huc-pinned-order-row",function(c,a,e,b,f){function h(a){a=a.$currentTarget;(g=
b.get(a))&&g.attrs("fromOrderRow",0<a.closest(l.orderRow).length)}function n(){g&&g.isActive()&&(g.attrs("fromOrderRow")?g.updatePosition():g.hide())}function q(a){var b=a.popover;a=b.$popover;b.attrs("fromOrderRow")&&b.data.fromAddedItem&&(b=l.orderRowWithDivicer.data("isPinned")?"fixed":"absolute",a.css("position",b),"fixed"===a.css("position")&&(b=parseInt(a.css("top"),10)-d.scrollTop(),a.css("top",b)))}var d=a(p),l={},g,u={imbTipsTrigger:"#huc-imb-tips-action",orderRow:"#huc-v2-order-row-container",
orderRowDivider:"#huc-v2-order-row-divider",orderRowPlaceHolder:"#huc-v2-order-row-placeholder",orderRowWithDivicer:"#huc-v2-order-row-with-divider"};(function(){function a(b){b=d.scrollTop();if(l.orderRowWithDivicer.data("isPinned")){var c=-1*d.scrollLeft(),f=parseFloat(l.orderRow.css("left"));c!==f&&(l.orderRow.css("left",c),l.orderRowDivider.css("left",c));b<p&&(b=l.orderRowWithDivicer,b.data("isPinned")&&(l.orderRowPlaceHolder.addClass("a-hidden"),b.removeClass("huc-v2-pinned-order-row-with-divider").data("isPinned",
0),l.orderRow.removeClass("huc-v2-pinned-order-row"),l.orderRowDivider.addClass("a-hidden"),n()))}else b>p&&(b=l.orderRowWithDivicer,b.data("isPinned")||(l.orderRowPlaceHolder.removeClass("a-hidden"),l.orderRow.addClass("huc-v2-pinned-order-row"),l.orderRowDivider.removeClass("a-hidden"),b.addClass("huc-v2-pinned-order-row-with-divider").data("isPinned",1),n()))}e.refreshElements(l,u);var b=l.orderRow;if(b.length){l.orderRowPlaceHolder.height(b.height());var p=(l.orderRow.offset()||{top:0}).top-26;
d.scroll(a);c.declarative("a-popover","click",h);c.declarative("sc-click-popover","click",h);c.declarative("a-popover","mouseenter",h);c.on("a:popover:afterUpdatePosition",q);l.imbTipsTrigger.length&&(g=f.get(l.imbTipsTrigger))}})()});"use strict";p.amz_js_PopWin=function(c,a,e){p.open(c,a,e).focus();return!1};"use strict";e.when("A","jQuery").execute(function(c){var a=p.ue;c.declarative("remaining-customizations-action","click",function(c){c.$currentTarget.parent().find(".remaining_customization_info").removeClass("aok-hidden");
c.$currentTarget.hide();c.$event.preventDefault();"undefined"!==typeof a&&"function"===typeof a.count&&a.count("AmazonCustom:show-remaining-customizations",1)})});"use strict";e.when("A","jQuery","huc-rec-upsell","ready").execute("huc-countdown",function(c,a){function e(b){var c=a(b).parents(".huc-v2-upsell-box");a(b).text("00:00");c.find(".add-to-cart-button").hide();c.find(".huc-deal-ended").show();c.find(".p13n-pd-progbarWrapper div:first").addClass("p13n-pd-progbarMissed").removeClass("p13n-pd-progbar")}
function b(a,b){this._init(a,b)}b.prototype={_init:function(b,c){var e=this,m=a(b).attr("data-remainingSeconds");if(0<m)var d=setInterval(function(){e.updateCountdown(b,m--);0>m&&(clearInterval(d),c(b))},1E3);else c(b)},updateCountdown:function(b,c){var e=Math.floor(c/3600),m=Math.floor(c/60%60);c=Math.floor(c%60);a(b).text((0<e?e+":":"")+(10>m?"0":"")+m+":"+(10>c?"0":"")+c)}};(function(){a(".huc-countdown").each(function(a,c){new b(c,e)})})()})});
/* ******** */
