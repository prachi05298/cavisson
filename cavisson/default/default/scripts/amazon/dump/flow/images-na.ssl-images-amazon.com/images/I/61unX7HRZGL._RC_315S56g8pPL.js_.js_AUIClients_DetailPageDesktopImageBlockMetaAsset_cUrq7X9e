(function(v){var q=window.AmazonUIPageJS||window.P,fa=q._namespace||q.attributeErrors,g=fa?fa("DetailPageImageBlockAssets",""):q;g.guardFatal?g.guardFatal(v)(g,window):g.execute(function(){v(g,window)})})(function(v,q,fa){v.register("postMetric",function(){return{postCountMetric:function(g){if("undefined"!==typeof g){var a=q.ue;if(a){var b=a.count(g)||0;a.count(g,b+1)}}},postTimeMetric:function(g,a){if("undefined"!==typeof g&&"undefined"!==typeof a){var b=q.ue;b&&b.count(g,a)}},emitNexusMetric:function(g){q.ue&&
ue.event&&ue.event(g,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(g,a,b,h,k,e,m,d){return{eventSource:"IBCarousel",placementContext:d,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:g,intPayload:a,videoAsin:b,videoAsinList:"",groupType:h,pageUrl:k,pageAsin:e,weblabIds:m}}}});"use strict";v.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});v.register("postEarlyMetric",function(){return null});"use strict";
v.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(g,a,b,h){g=g.extend(!0,{},b,h);var k=new a(g);v.register("ImageBlockAPI",function(){return k.api});return k});"use strict";v.when("A","jQuery").execute(function(g,a){g.on("a:image:load:landingImage",function(){q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});g.loadDynamicImage(a("#landingImage"))});"use strict";v.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(g){function a(b){b&&(v.load.js(b),q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",q.parseInt(performance.now())))}function b(b){b&&v.load.css(b)}var h=g.airyConfig;h===fa?v.when("ImageBlockBTF").execute(function(g){h=g.airyConfig;a(h.jsUrl);b(h.cssUrl)}):(a(h.jsUrl),b(h.cssUrl))});"use strict";v.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(g,
a,b,h,k){var e={};return function(m){var d=this;d.dispatch=function(b,a){var d=e[b];h.isDefined(d)&&g.each(d,function(b,e){e.call(q,a)})};d.register=function(b,a){h.isDefined(e[b])||(e[b]=[]);"function"===typeof a&&e[b].push(a)};d.model=new a(m,d);d.view=new b(m,d,d.model);d.api=new k(m,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";v.when("A","imageBlockUtils").register("ImageBlockModel",function(g,a){function b(b,e,d,g,m,h){a.isDefined(b)&&(l.type=b);a.isDefined(e)&&
(l.index=e);a.isDefined(d)&&(l.thumbnailIndex=d);a.isDefined(g)&&(l.variant=g);a.isDefined(m)&&(l.color=m);l.shoppableScene=h||null}function h(a){b("image",0,0,"MAIN",a||d.landingAsinColor||d.defaultColor,null)}function k(a){a=a.data;Q=g.copy(l);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}function e(b){k(b);b=g.copy(b);b.data=g.copy(l);r.dispatch("updateView",b)}function m(){Q=g.copy(l);h(l.color)}var d,r,l={},Q={},E,q;return function(b,a){r=a;d=b;r.register("updateSelection",
e);r.register("updateModel",k);r.register("resetModel",m);this.init=function(){h()};this.getCurrentItem=function(){return g.copy(l)};this.getPreviousItem=function(){return g.copy(Q)};this.setCurrentEvent=function(b){E=b};this.getCurrentEvent=function(){return E};this.setImmersiveViewModalInstance=function(b){q=b};this.getImmersiveViewModalInstance=function(){return q};this.updateTitle=function(b){d.title=b}}});"use strict";v.when("ImageBlockBTF","postMetric").execute(function(g,a){function b(b,a,
m,d,h){function l(b){"click"===b.type&&d.postCountMetric("thumbClick");"click"===b.type&&t.overrideAltImageClickAction?z.dispatch("thumbActionClick",b):z.dispatch("updateSelection",b)}function Q(b){t.useClickZoom||z.dispatch("imageClick",b)}function E(b){t.useClickZoom||z.dispatch("imageHover",b)}function L(b){z.dispatch("button360Click",b)}function y(a){!m.isDefined(a)||"swatchClick"!==a.type&&"updatedData"!==a.type?(n.update(a),"swatchHover"!==a.type&&A.getPreviousItem().thumbnailIndex!==a.data.thumbnailIndex&&
d.postCountMetric(a.data.type+"ThumbnailSelected"),b.trigger("image-block-thumbnail-selected",a.data)):(n.render(a.data.color,!1,a.onload),a={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof q.markFeatureRender&&q.markFeatureRender("imageblock",a))}function D(b){z.dispatch("resize",b)}function J(b){m.selectThumbnail(b,C)}function K(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",
events:["click"],alwaysInteractive:!0}]})}function N(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===g.useIV?v.when("a-modal").execute(function(){K()}):K();t.disableHoverOnAltImages||b.declarative("thumb-action",["mouseenter","mouseleave"],l);b.declarative("thumb-action",["click"],l);b.declarative("main-image-click",
["click"],Q);b.declarative("main-image-click",["mouseenter","mouseleave"],E);b.declarative("button-360-click",["click"],L);b.on("resize",D)}function P(b){var a=b.data,c;a&&"ingress"!==a.type&&"click"===b.type&&(c=b);return c}function c(b){var a=A.getCurrentItem(),c={type:"click"};c.$declarativeParent=b;c.data=a;return c}var n,t,z,A,C;return function(b,d,g){n=this;t=b;z=d;A=g;C=a("#imageBlock #altImages ul");var m=a("#imageBlock .canvas"),p=a("#main-image-container"),f;n.subViews=[];for(d=0;d<h.length;d++)n.subViews.push(new h[d](b,
g,n,z));n.render=function(b,d,g){var h=0;C.find(".item").remove();b=b||A.getCurrentItem().color;a.each(n.subViews,function(f,a){h=a.render(b,h,m,C,p,d,g)||h});var k=C.find(".a-button-selected").closest(".a-declarative");f=c(k)};n.init=function(){C=a("#imageBlock #altImages ul");var b=C.find(".a-button-selected").closest(".a-declarative"),f=b.data("action"),b=b.data(f)||{};b.color=t.landingAsinColor||t.defaultColor;z.dispatch("updateModel",{data:b});n.render(b.color,!0);t.isDebug&&q.console&&console.log(t);
z.register("updateView",y);z.register("selectThumbnail",J);N()};n.update=function(b){a.each(n.subViews,function(f,a){a.update(b)});t.usePeekHover&&("mouseleave"===b.type?z.dispatch("updateSelection",f):"click"===b.type&&(f=P(b)||f))}}}var h=["A","jQuery","imageBlockUtils","postMetric"].concat(g.views);v.when.apply(v,h).register("ImageBlockView",function(){for(var a=arguments[0],e=arguments[1],g=arguments[2],d=arguments[3],h=[],l=4,Q=arguments.length;l<Q;l++)h.push(arguments[l]);return b(a,e,g,d,h)})});
"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(g,a,b,h,k,e,m){function d(c,e,p,f){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var d=t.getCurrentItem();if(!f||"chromeless-video"!==d.type||!n.autoplayVideo){f=0;"image"===d.type&&(f=Math.max(E(d.color,d.variant),0));var g=e+f;g>=p&&(f=0,g=e);e=b.getImageHash(d.color,f,n);-1!==e&&(z.dispatch("updateModel",{data:{index:f,
thumbnailIndex:g,variant:e.variant,type:"image",shoppableScene:e.shoppableScene}}),e=c.find(".item").get(g),b.selectGivenThumbnail(a(e),c))}}}function r(c,g,p){g=n.colorImages&&n.colorImages[g];var f=c;b.isDefined(g)&&(a.each(g,function(f,a){c<n.maxAlts&&(b.createThumbnail({type:"image",index:f,thumbnailIndex:c,variant:a.variant,shoppableScene:a.shoppableScene},a.thumb,A,"imageThumbnail"),c++)}),e.isEnabled&&m.logAltImgRequestPlacedOnThumbnails(a,e,t),d(A,f,c,p));return c}function l(c,e){if("image"===
c.type){var p=a("#image-canvas-caption #canvasCaption"),f,d=n.staticStrings,g=n.colorImages,h=c.color,m=c.index;b.isShoppableScenesEnabled()&&c.shoppableScene?f=d.clickSceneTagsToShopProducts:e&&n.useIV?f=d.clickToExpand:g[h]&&g[h][m].hiRes&&n.useHoverZoom?(f=n.useHoverZoomIpad?d.touchToZoom:n.useClickZoom?d.clickToZoom:d.rollOverToZoom,n.hoverZoomIndicator&&(f="\x3cimg src\x3d'"+n.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+f)):n.useIV&&(f=d.clickToExpand);p.html(f)}}function Q(){C.find("li").removeClass("selected");
a("#image-canvas-caption #canvasCaption").empty();b.hideUnavailable()}function E(a,c){return b.getIndexForVariant(a,c,n)}function q(c,e){var p="a-dynamic-image";if(!n.acEnabled){var f;a.each(c.main,function(a,p){b.isDefined(f)||(f=parseFloat(p[1]/p[0])<=parseFloat(n.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});p+=f}var d=b.getMaxDimensionsOfMainImage(c.main,I,n),g=d[0],h=d[1],d=a("\x3cdiv\x3e\x3c/div\x3e"),g={"max-height":g,"max-width":h};d.addClass(p).css(g).attr({"data-old-hires":c.hiRes,
"data-a-manual-replacement":"true",onload:e}).data("a-dynamic-image",c.main);return d}function y(b){var a=I.css("height");null!==a&&b.find(".imgTagWrapper").css("height",a);b.addClass("selected");n.imgTagWrapperClasses&&b.find(".imgTagWrapper").addClass(n.imgTagWrapperClasses)}function D(a,c){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){b.isDefined(c)&&k.postCountMetric("mainImageUpdateOnTwisterVariationClick");var p=b.getImageHash(a.color,a.index,n);if(-1===p)return p={data:{index:0,
thumbnailIndex:0,variant:"",type:"unavailable"}},K(a)||(z.dispatch("updateModel",p),b.showUnavailable(a.color)),-1;var f=C.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(f)){var f=a.thumbnailIndex,d=q(p,c),h;if(b.isShoppableScenesEnabled()&&p.shoppableScene){h="desktop-dp-atf-ib-shoppablescenes-tags-"+f;"function"==typeof uet&&uet("bb",h,{wb:1});d.attr("data-a-image-name","shoppable-scene");var B=C.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");
B.addClass("celwidget").attr("cel_widget_id",h);B.children("span").css("display","inline-block");z.dispatch("initialize-shoppable-scene",{index:f,shoppableScene:p.shoppableScene,imageSource:p.hiRes,$tagPlaceholder:B.find(".mirai-scene-tag-placeholder"),$viewProductsButton:B.find(".mirai-scene-view-products-button")});"function"==typeof uet&&uet("cf",h,{wb:1});h=B}else h=C.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");h.addClass("image item itemNo"+f+" maintain-height");
h.find(".placeHolder").replaceWith(d);C.find(".list").append(h);g.loadImageManually(d);f=h}y(f);z.dispatch("loadMagnifier");l(a);n.useIV&&b.isDefined(p.hiRes)&&f.css("cursor","pointer");a.isUserGenerated&&(f=t.getPreviousItem(),d=a.variant,b.isDefined(d)&&f.thumbnailIndex!==a.thumbnailIndex&&(e.isEnabled&&m.logAltImgRequestServed(e),k.postCountMetric("ImageThumbnailSelectedVariant:"+d),0===d.indexOf("IG")&&(k.postCountMetric("IGImageSelectedVariant:"+d),k.postCountMetric("IGImageSelectedEvent:"+a.interaction))));
g.trigger("dp:image-block:update",p)}}function J(){a("#imageBlock").css("opacity","1");C.css("opacity","1");b.spinner(C,!1)}function K(a){return b.lazyLoadingRequired(a,t,n)}function N(){var c=C.find(".item .imgTagWrapper"),d=b.getContainerHeight(I,n.holderRatio,n.holderMaxHeight);0<d&&(I.height(d),c.height(d));C.find("img.a-dynamic-image").each(function(){var c=a(this);c.data("a-manual-replacement")&&g.loadDynamicImage(this);var f=c.data("a-dynamic-image"),f=b.getMaxDimensionsOfMainImage(f,I,n);
c.css({"max-height":f[0]+"px","max-width":f[1]+"px"})})}function P(b){l(t.getCurrentItem(),"mouseenter"===b.type)}var c,n,t,z,A,C,I,w;g.on("triggerImageAjax",function(a){var c=t.getCurrentItem().color;n.colorImages[c]||(n.colorImages[c]=a);a={type:"updatedData",data:t.getCurrentItem()};z.dispatch("updateView",a);(c=n.colorToAsin[c])&&c.asin&&v.register(b.rankedImagesReadyEvent(c.asin))});return function(a,d,p,f){c=this;n=a;t=d;z=f;n.colorImages[n.landingAsinColor]=n.colorImages[n.defaultColor];c.render=
function(b,a,f,c,p,d,e){C=f;A=c;I=p;w=r(a,b,d);d||(b=t.getCurrentItem(),K(b)&&z.dispatch("updateModel",{data:{type:"lazy-loaded"}}));b=t.getCurrentItem();d=!d;K(b)||(J(),Q(),d&&C.find(".list .item").remove());D(t.getCurrentItem(),e);return w};c.update=function(a){var f=a.data;t.setCurrentEvent(a);"ingress"===f.type||K(a.data)||(J(),Q());if("swatchHover"===a.type)if(f.color===t.getCurrentItem().color)D(t.getCurrentItem());else{if(!a.captured){var c;c=Math.max(E(f.color,t.getCurrentItem().variant),
0);c=b.getImageHash(f.color,c,n);if(-1===c)K(f)||b.showUnavailable(f.color),c=-1;else{var f=C.find(".swatchHoverExp"),p=q(c);f.find(".imgTagWrapper").html(p);g.loadImageManually(p);k.postCountMetric("mainImageUpdateOnTwisterVariationHover");y(f);g.trigger("dp:image-block:update",c);c=void 0}-1!==c&&(a.captured=!0)}}else"image"===f.type&&(f.interaction=a.type,f.isUserGenerated=!0,"mouseenter"===a.type&&k.postCountMetric("dpcc_imageThumbHovered_"+(f.thumbnailIndex+1)+"_"+w),D(f),n.usePeekHover&&"click"!==
a.type||(b.selectGivenThumbnail(a.$declarativeParent,A),"click"===a.type&&(k.postCountMetric("dpcc_imageThumbClicked_total"),k.postCountMetric("dpcc_imageThumbClicked_"+(f.thumbnailIndex+1)+"_"+w))))};n.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");z.register("imageHover",P);z.register("resize",N)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(g,a,b,h,k,e){function m(a){K?
a.css("cursor","url('"+E.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function d(a){var d=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(d))for(var d=d[1].split("_"),c=0;c<d.length;c++){var e=d[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function r(l,r){function c(){var a;r.useClickZoom?(a=r.offsetInClickZoom,a=[Math.min(1,Math.max(0,F[0]-(B[0]+a))/(B[2]-2*
a)),Math.min(1,Math.max(0,F[1]-(B[1]+a))/(B[3]-2*a))]):a=f&&f.updatePosition();if(a&&p&&p.detailSize){var b=[p.detailSize[0]-p.rect.width,p.detailSize[1]-p.rect.height];g.capabilities.rtl?p.detailImage.get(0).style.right=-(a[0]*b[0])+"px":p.detailImage.get(0).style.left=-(a[0]*b[0])+"px";p.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function n(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function t(b){var f=R?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";
F=R?[f.pageX,f.pageY]:[b.pageX,b.pageY];if(g.capabilities.rtl){var c=a(q).width();F=R?[c-f.pageX,f.pageY]:[c-b.pageX,b.pageY]}}function z(a){R&&a.preventDefault();t(a);r.useClickZoom?a=[B[0],B[1],B[0]+B[2],B[1]+B[3]]:(a=f?f.offset:l.offsetParent().offset(),a=E.acEnabled?[a.left,a.top,y.width()+a.left,y.height()+a.top]:[G[0]+a.left,G[1]+a.top,G[0]+G[2]+a.left,G[1]+G[3]+a.top]);F[0]<a[0]||F[1]<a[1]||F[0]>=a[2]||F[1]>=a[3]||E.acEnabled&&!n(l)?(r.fadeMagnifier?X||(X=!0,ca=setTimeout(function(){A(!0)},
500)):r.useClickZoom||A(),x&&(x=!1,clearTimeout(J))):(x||(x=!0,J=setTimeout(function(){h.postCountMetric("dppc_hoverZoomOpened");k.isEnabled&&e.logHoverZoomRequestServed(k)},1E3)),r.fadeMagnifier&&X&&(X=!1,clearTimeout(ca)),c())}function A(b){b&&w.suppressMagnifier(!0);if(v&&(p&&p.hide(),f&&(f.destroy(),f=null),v=!1,R?(l.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
Q(),b))l.one("click.magnifier touchstart.magnifier",function(a){C(a,!0)})}function C(b,d){d&&w.suppressMagnifier(!1);if(!v&&!V&&(0===Y&&(h.postCountMetric("dppc_hoverTime",new Date-(q.ue&&q.ue.t0||0)),Y=1),ga[W]||(h.postCountMetric("dppc_hoverMain"),ga[W]=1),G=[l.position().left,l.position().top,l.width(),l.height()],W&&(t(b),p?p.refit().show():p=new L,r.useClickZoom||(f=f||new ha),B=p.getWindowSize(),c()),v=!0,R?(l.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",z).bind("touchend.magnifier",
A),a(document).trigger("engaged.magnifier")):(E.acEnabled?y.unbind("mousemove.magnifier"):l.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",z)),d)){var e=a("#zoomWindow");if(0<e.length)e.one("click.magnifier touchend.magnifier",function(a){A(!0)})}}function Q(){r.useHoverZoom&&(R?l.bind("touchstart.magnifier touchmove.magnifier",C):E.acEnabled?n(l)&&y.bind("mousemove.magnifier",C):l.bind("mousemove.magnifier",C))}var w=this,y=l.offsetParent(),D={detailImageUrl:l.attr("data-old-hires"),
location:"over",locationElement:l,prelaod:"ready",zIndex:50,offsetInClickZoom:50};r=a.extend(D,r);r.adjustment=[10,0,-10,0];var p=null,f=null,F=null,G=null,B=null,H={"null":1,"":1,undefined:1},v=!1,V=!1,W=r.detailImageUrl,R=r.useHoverZoomIpad||0,Y=0,ga={},ha=function(){function b(a){var f=Math.round(Math.min(l.width(),p.rect.width/a));a=Math.round(Math.min(l.height(),p.rect.height/a));g.css({width:f,height:a});c=[f,a]}var f=this,c=[0,0],d=(p.detailSize&&p.detailSize[0]||5E8)/G[2],e=(p.detailSize&&
p.detailSize[1]||5E8)/G[3],d=e>d?e:d;a("#magnifierLens").remove();var g=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});r.generalImageUrls.zoomLensBackground&&g.css({backgroundImage:"url("+r.generalImageUrls.zoomLensBackground+")"});E.showMagnifierOnHover?m(g):g.css("cursor","pointer");f.updatePosition=function(){var a=[G[2]-c[0],G[3]-c[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(F[0]-c[0]/2-G[0]-f.offset.left)/a[0])),d=0>=a[1]?.5:Math.max(0,Math.min(1,(F[1]-c[1]/2-G[1]-f.offset.top)/
a[1])),p=G[0]+Math.round(b*a[0]),a=G[1]+Math.round(d*a[1]);g.get(0).style.left=p+"px";g.get(0).style.top=a+"px";return[b,d]};f.destroy=function(){g.remove()};f.offset=l.offsetParent().offset();b(d);f.updatePosition();g.appendTo(l.parent());p.detailImage[0].complete||p.detailImage.load(function(){var a=p.detailImage.width()/G[2];b(a);f.updatePosition()})};ha.preload=function(){w.preload(r.generalImageUrls.lensBackgroundUrl)};var L=function(){function f(){var c={};if("over"===r.location){var c=r.useClickZoom,
d={},p=a("#leftCol"),h=a("#centerCol"),m=a("#rightCol"),k=a("#hover-zoom-end"),t=a("#actionPanelContainer"),F=b.isjQueryObjDefined(p)?p.outerHeight():h.outerHeight();d.top=b.isjQueryObjDefined(p)?p.offset().top:h.offset().top;d.bottom=F+d.top;d.right=b.isjQueryObjDefined(m)?m.offset().left:t.offset().left;d.left=c?0:p.offset().left+p.outerWidth();b.isjQueryObjDefined(k)&&k.offset().top>d.bottom&&(d.bottom=k.offset().top);c=d}else"right"===r.location&&(c=l.offset(),c={left:c.left+l.outerWidth(),top:c.top,
right:c.left+l.outerWidth()+400,bottom:c.top+400});r.minHeightElement&&(c.bottom=Math.max(c.bottom,c.top+a(r.minHeightElement).outerHeight()));c.bottom=Math.min(c.bottom,a(q).scrollTop()+a(q).height());c.left+=g[0];c.top+=g[1];c.right+=g[2];c.bottom+=g[3];c.width=c.right-c.left;c.height=c.bottom-c.top;r.enhancedHoverOverlay&&b.isDefined(q.pageXOffset)&&(d=a(q).width(),c.width=d-c.left+q.pageXOffset-18,c.height-=14);n.css({left:c.left,top:c.top,width:c.width,height:c.height});e.rect=c;return e}function p(a){var b=
new Image;e.detailSize=[0,0];b.onload=function(){e.detailSize=[b.width,b.height];c()};b.src=a.attr("src");if(0<b.width&&0<b.height)e.detailSize=[b.width,b.height];else if(r.detailImageSize)e.detailSize=r.detailImageSize;else{a=d(b.src);var f=G[2]/G[3];a.SS||a.AA?(a=a.SS||a.AA,e.detailSize=[a,a]):a.SX?e.detailSize=[a.SX,Math.round(a.SX/f)]:a.SY?e.detailSize=[Math.round(a.SY*f),a.SY]:a.SL&&(e.detailSize=1<=f?[a.SL,Math.round(a.SL/f)]:[Math.round(a.SL*f),a.SL])}}var e=this,g=r.adjustment;a("#zoomWindow").remove();
var h={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:r.zIndex};r.enhancedHoverOverlay&&(h.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",h.border="1px solid #949494",h.borderColor="rgb(148,148,148)");var n=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(h);r.fadeMagnifier&&n.fadeIn(200);r.useClickZoom&&(K?n.css("cursor",'url("'+r.zoomOutIcon+'"), auto'):(n.css("cursor","-webkit-zoom-out"),n.css("cursor","-moz-zoom-out"),n.css("cursor","zoom-out")));e.updateImage=function(b){b=a("\x3cimg id\x3d'detailImg' src\x3d'"+
b+"'/\x3e").css("position","absolute");e.detailImage&&e.detailImage.remove();n.append(b);a(document).trigger("updated.magnifier");e.detailImage=b;p(e.detailImage)};e.refit=function(){f();p(e.detailImage);return e};r.fadeMagnifier?(e.show=function(){n.fadeIn(200);return e},e.hide=function(){n.fadeOut(200);return e}):(e.show=function(){n.show();return e},e.hide=function(){n.hide();return e});e.destroy=function(){n.remove();return e};e.getWindowSize=function(){return[e.rect.left,e.rect.top,e.rect.width,
e.rect.height]};e.updateImage(W);f();n.appendTo(document.body)},X=!1,ca,x=!1,J;w.preload=function(b){b=a.makeArray(b);for(var f=b.length,c=0;c<f;c++)b[c]instanceof Array?w.preload(b[c]):"string"===typeof b[c]&&b[c]&&!H[b[c]]&&(H[b[c]]=new Image,H[b[c]].src=b[c])};w.changeImage=function(b,c){v&&A();W=c;l.attr("src",b);w.preload(b);G=[l.position().left,l.position().top,l.width(),l.height()];c&&("immediately"===r.preload?w.preload(c,!0):a(q).ready(function(){w.preload(c)}),p?p.updateImage(c):l.attr("data-old-hires",
c))};w.destroy=function(){E.acEnabled?y.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):l.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");f&&f.destroy();f=null;p&&p.destroy();p=null};w.detailImage=function(){return p.detailImage};w.suppressMagnifier=function(a){V=a};w.isEngaged=function(){return v};w.engageMagnifier=C;w.disengageMagnifier=A;l[0].complete?Q():l.one("load",Q);w.preload(l.attr("src"));
q.performance&&performance.now&&q.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(r.preload){var la=r.detailImageUrl,D=function(){w.preload(la,!0);r.useClickZoom||ha.preload()},aa=r.preload;aa.constructor!==Array&&(aa=[aa]);for(var u=0;u<aa.length;u++)if("immediately"===aa[u])D();else if(a(q)[aa[u]])a(q)[aa[u]](D);else a(q).bind(aa[u],D)}return w}function l(){if(E.useHoverZoom){var d={adjustment:[0,0,1,1],generalImageUrls:E.staticImages,location:"over",minHeightElement:"#imageBlock",
preload:"ready",zIndex:199,useHoverZoomIpad:E.useHoverZoomIpad,useHoverZoom:E.useHoverZoom,useClickZoom:E.useClickZoom,fadeMagnifier:E.fadeMagnifier,zoomOutIcon:E.staticImages.zoomOutCur,enhancedHoverOverlay:E.enhancedHoverOverlay||E.atfEnhancedHoverOverlay};D&&(D.destroy(),D=fa);var g=J.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(g)?E.useClickZoom?(g.one("click.loadmagnifier touchstart.loadmagnifier",function(a){D=
new r(g,d);D.engageMagnifier(a,!0)}),K?g.css("cursor",'url("'+E.staticImages.zoomInCur+'"), auto'):(g.css("cursor","-webkit-zoom-in"),g.css("cursor","-moz-zoom-in"),g.css("cursor","zoom-in"))):D=new r(g,d):k.isEnabled&&e.logHoverZoomApplicability(a,k)}}var Q,E,v,y,D,J,K=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,e){Q=this;E=a;v=b;k.refToModel=v;y=e;Q.render=function(a,b,c,e,d,g){J=c;D&&(D.destroy(),D=fa)};Q.update=function(a){};y.register("loadMagnifier",l);y.register("resize",
l)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(g,a,b,h){function k(a,e,g){a=(a=g?g:b.getColorFromState(e.getState().hovered_variations,d))&&""!==a?a:d.defaultColor;l.dispatch("updateView",{type:"swatchHover",data:{color:a}});h.postCountMetric("swatchHover")}function e(a,e,g,m){a=(a=m?m:b.getColorFromState(e.getState().selected_variations,d))&&""!==a?a:d.defaultColor;a===r.getCurrentItem().color?"function"===typeof g&&g():(l.dispatch("updateSelection",
{type:"swatchClick",data:{color:a},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof q.markFeatureRender&&q.markFeatureRender("imageblock",a);g()}}),h.postCountMetric("swatchClick"))}var m,d,r,l;return function(a,b,h,q){m=this;d=a;r=b;l=q;g.on("image-block-twister-swatch-hover",k);g.on("image-block-twister-swatch-click",e);m.render=function(a,b,e,d,g){};m.update=function(a){}}});"use strict";v.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader",
"postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(g,a,b,h,k,e,m){function d(b,f,e,d){!c.autoplayVideo||R||c.useChromelessVideoPlayer?!h.isjQueryObjDefined(b.find(".a-button-selected"))&&(e=n.getCurrentItem(),!d||c.prioritizeVideos||"chromeless-video"===e.type&&c.autoplayVideo)&&(d=h.getVideoHash(e.color,0,c),-1!==d&&(f+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:f,variant:d.variant,type:c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),f=b.find(".item").get(f),
h.selectGivenThumbnail(a(f),b))):(h.selectGivenThumbnail(b.find("img:last"),b),h.fadeToThumbnail(b.find("img").length-1,I,b))}function r(a){var b=n.getCurrentItem().color;if(c.useChildVideos&&!c.colorToVideo[b]){var f=function(){if(a){c.colorToVideo[b]=a;var f={type:"updatedData",data:n.getCurrentItem()};t.dispatch("updateView",f)}};c.lazyLoadExperienceDisabled?f():v.when(h.rankedImagesReadyEvent(c.colorToAsin[b].asin)).execute(function(){f()})}}function l(a){if(!c.useChildVideos)return h.lazyLoadingRequired(n.getCurrentItem(),
n,c)?void 0:c.videos;if(c.colorToVideo[a])return c.colorToVideo[a];var b=c.colorToAsin[a];if(b&&b.asin){var f={};f.params={asin:b.asin,productGroupID:c.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:c.useChromelessVideoPlayer,isUDP:c.isUDP};c.isDPXFeatureEnabled||(f.success=function(a){r(a)},k.load("/gp/product/features/apparel-main-image/videos.html",f));return c.colorToVideo&&c.colorToVideo[a]}}function Q(){M&&(M.hide(),A.parent().css("z-index",-1),C.hide())}function E(){t.dispatch("selectThumbnail",
h.useTabbedImmersiveView(c)?1:0)}function L(f,c,d,p){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:f[0],streamingUrls:c.url,swfUrl:d.swfUrl,foresterMetadataParams:d.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=h.isjQueryObjDefined(f.find("video"))?"HTML5":"FLASH";e.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){f.parent().css("z-index",8)},videounsupported:function(){E();
e.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){E();e.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){M.seek(0)}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(b,c,e){b=e.durationSeconds-e.playheadTimeSeconds;f.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*b,.1,function(){f.parent().css({"background-color":"transparent","z-index":-1});E();a(this).show().css("opacity",1)})}}]})}function y(b){if("chromeful-video"===
b.type||"chromeless-video"===b.type){var f=h.getVideoHash(b.color,b.index,c);if(-1===f)return-1;if("chromeful-video"===b.type){b=b.thumbnailIndex+1;var e=I.width()/I.height(),d=parseInt(f.videoWidth,10),m=parseInt(f.videoHeight,10);h.updateAspectRatio(e,d,m,A);M?M.show():M=c.tabletWeb?F:h.createAiryInstanceForChromefulNotUseTabbedImmersiveView(A,f,T,null,c.autoplayVideo,I,C,z,b,c.useTabbedImmersiveView,B,G,H);b:if(h.useTabbedImmersiveView(c)){if(1<h.getVideosCount(n.getCurrentItem().color,c)){if(h.isDefined(w)){C.show();
break b}w=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(c.staticStrings.watchMoreVideos);C.find("#videoCaption").append(w);g.declarative.create(w,"videoIngressClick",p)}h.playVideoInImmersiveView(c,n.getCurrentItem().color)&&(g.declarative.create(A,"videoIngressClick",p),A.attr&&A.attr("data-ux-click",""),A.children().css("z-index","-1"),A.css("display","inline-block"))}else C.find("#videoCaption").text(c.staticStrings.playVideo),C.show();f=M;c.autoplayVideo&&f&&!R&&(h.toggleVideoCaption(C),
f.setVolume(0),f.show(),f.play(),R=!0)}else M?(M.show(),h.loadMediaIntoAiry(M,f,T,c.tabletWeb),M.play(),C.show()):(M=L(A,f,T))&&M.play()}}function D(b,f,n){var m=l(f);f=b;var k=h.isDefined(m)&&0<m.length&&c.alwaysIncludeVideo?1:0;h.isDefined(m)&&0<m.length&&!c.alwaysIncludeVideo&&b===c.maxAlts&&e.postCountMetric("IBVideoDrop");k&&b===c.maxAlts&&(z.find(".item:last").remove(),b--);h.isDefined(m)&&(a.each(m,function(f,d){if(b<c.maxAlts){var g=c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",
n={type:g,index:f,thumbnailIndex:b,variant:d.variant};p={type:"video-ingress",index:f,thumbnailIndex:b,variant:d.variant};h.useTabbedImmersiveView(c)&&("chromeful-video"===g&&(Y+=" videoBlockIngress  videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb","")),c.altsOnLeft||(Y+=" a-align-top"));h.createThumbnail(n,d.thumb,z,Y);if(2===c.dp60VideoPosition){var k=z,n=c.dp60VideoPosition;if(0!==n){var l=k.children(".imageThumbnail"),k=k.children(".videoBlockIngress");l&&k&&l[n-
1]&&a(l[n-1]).before(k[0])}}h.useTabbedImmersiveView(c)&&(J(z.find(".videoBlockIngress img"),c.videoIngressATFSlateThumbURL),n=1<m.length?"multiple-videos":"one-video",(l=1<m.length?m.length+" "+c.staticStrings.multipleVideos:c.staticStrings.singleVideo)&&z.find(".videoBlockIngress").append(z.find("#videoCount_template").clone().text(l).attr("id","videoCount")).addClass(n));n=e.buildNexusMetric("ib.thumbnailImpression",b+1,d.mediaObjectId,d.groupType,B,G,H,S);e.emitNexusMetric(n);n=e.buildNexusMetric("ib.thumbnailRender",
b+1,d.mediaObjectId,d.groupType,B,G,H,S);e.emitNexusMetric(n);W||(W=!0,e.postCountMetric("chromeless-video"===g?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(h.useTabbedImmersiveView(c))return!1}),d(z,f,b,n),c.imageBlockRenderingStartTime&&e.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",g.now()-c.imageBlockRenderingStartTime));return b}function J(a,b){var f=a.attr("src");if(f&&b){a.attr("src",b);var c=new Image;c.onload=function(b){a.attr("src",f)};c.src=
f}}function K(a){M&&M.pause();a.data=p;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";t.dispatch("imageClick",a);e.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=e.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,c.videos[0].mediaObjectId,c.videos[0].groupType,B,G,H,S);e.emitNexusMetric(a);e.postCountMetric(b)}function N(a){F=a.player;F.hide=function(){F.pause();g.$("#main-video-container").find(".vse-player-container").hide()};
F.show=function(){g.$("#main-video-container").find(".vse-player-container").show();F.play()};F.getMediaSourceInfo=function(){return h.getMediaSourceInfo()}}var P,c,n,t,z,A,C,I,w,M,T,p,f,F,G,B,H,S,V,W=!1,R=!1,Y="videoThumbnail";return function(b,d,k,l){P=this;c=b;n=d;t=l;T=c.airyConfig;H=c.contentWeblab&&c.contentWeblab+":"+c.contentWeblabTreatment;c.colorToVideo={};c.colorToVideo[c.landingAsinColor]=c.colorToVideo[c.defaultColor]=c.videos;c.tabletWeb?(V="tablet",S="applicationType.ImageBlock.vse_ib_tablet_web"):
g.capabilities.tablet?(V="tablet",g.capabilities.isAmazonApp&&(S="applicationType.ImageBlock.vse_ib_tablet_app")):(V="desktop",S="desktop_web.ImageBlock.vse_ib_iv");P.render=function(b,d,e,p,k,l){Q();z=p;A=k.find("#main-video-container");C=A.parent().find("#video-canvas-caption");I=a("#main-image-container");B=q.location.href;e=n.getCurrentItem().color;!0===l?G=c.mediaAsin:(G=c.colorToAsin[e]&&c.colorToAsin[e].asin,G=h.isDefined(G)?G:c.mediaAsin);c.useChromelessVideoPlayer||A.addClass("chromeful-container");
f=D(d,b,l);y(n.getCurrentItem());h.useTabbedImmersiveView(c)&&g.declarative("videoIngressClick",["click"],K);e=n.getCurrentItem().color;b=h.getVideoHash(e,0,c);-1!==b&&c.tabletWeb&&(b=h.getNilgiriServiceAjaxRequest(c,e,b),m.get(g,"#main-video-container",b,function(){g.$("#main-video-container").find(".vse-player-container").hide()},function(){g.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return f};P.update=function(a){var b=a.data;"ingress"===b.type||h.lazyLoadingRequired(b,
n,c)||Q();if("swatchHover"===a.type)b.color===n.getCurrentItem().color?y(n.getCurrentItem()):a.captured||h.lazyLoadingRequired(b,n,c)&&!h.lazyLoadOnHoverEnabled(c)&&y(n.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var d=h.getVideoHash(b.color,b.index,c);if("mouseenter"===a.type&&(e.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+f),"chromeless-video"===b.type)){var g=e.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,d.mediaObjectId,
d.groupType,B,G,H,S);e.emitNexusMetric(g)}y(b);c.usePeekHover&&"click"!==a.type||(h.selectGivenThumbnail(a.$declarativeParent,z),"click"===a.type&&(d=e.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,d.mediaObjectId,d.groupType,B,G,H,S),(!h.useTabbedImmersiveView(c)&&"chromeless-video"===b.type||"tablet"==V)&&e.emitNexusMetric(d),h.useTabbedImmersiveView(c)&&(e.emitNexusMetric(d),e.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+f),p.action="videoIngressClick",p.clickTimeStamp=
a.$event.timeStamp,p.$event=a.$event,p.$currentTarget=a.$currentTarget,t.dispatch("videoIngressClick",p),e.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(c.isDPXFeatureEnabled)g.on("triggerVideoAjax",r);g.on("vsePlayer-imageblock_tablet",N)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(g,a,b,h,k,e,m,d){function r(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function l(){u.find("#ivTitle").click(function(){aa.hide()})}function Q(){O=Pa?{type:"360-spin"}:ba.getCurrentItem()}function E(){var a=u.find("#ivStage"),b=aa.$container.find(".a-popover-wrapper"),f=b.find(".a-popover-inner"),b=b.height()-d.getDimension(f,"padding-top")-d.getDimension(f,"padding-bottom");u.css("height",b);var f=u.find("#ivTitle").outerHeight(!0),c=u.find("#ivVariationSelection").outerHeight(!0),e=u.find("#ivMediaSelection").outerHeight(!0),p=u.find("#ivThumbs"),
g=d.getDimension(p,"margin-top")+d.getDimension(p,"margin-bottom");p.css("height",b-f-c-e-g);u.find("#ivLargeImage").css("height",b);a.css("width",u.width()-d.getDimension(u,"padding-left")-d.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-d.getDimension(a,"margin-left")-d.getDimension(a,"margin-right"))}function L(){u.find("#ivMediaSelect").change(function(){var b=a(this).val();"all"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===
O.type&&u.find("#ivVideo_"+O.index).click()):"images"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===O.type&&(0===da&&0===Z?u.find("#iv360").click():0===da?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===b&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==O.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+O.index).click())})}function y(){var a=u.find("#ivStage").find("#ivLargeImage"),
b=a.width(),f=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var d=c.width(),e=c.height();0<c.length&&(c[0].naturalWidth&&(d=c[0].naturalWidth),c[0].naturalHeight&&(e=c[0].naturalHeight));a.css("cursor","auto");var d=0===d?1:d,e=0===e?1:e,p=Math.min(b/d,f/e),g=e*p,n=d*p;1>p?(Qa?a.css("cursor","url('"+x.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;d=Math.min(n,d);e=Math.min(g-20,e);c.css({"margin-top":(f-
e)/2,"margin-left":(b-d)/2,height:e,width:d});a.css("visibility","visible");Aa=!1}function D(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();d.animateStageIn(b);b.append(a);y()}function J(){ea&&ea.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display","none");z()}function K(f){J();u.find("#ivLargeImage").css("display","block");var c;"hero-image"===f?b.isDefined(ja)&&(c=r(ja[O.index])):b.isDefined(ka)&&
(c=r(ka[O.index]));if(b.isDefined(c)){u.find(".fullscreen").remove();var e=a("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),p=u.find("#ivLargeImage");d.animateStageOut(p,function(){e.load(function(){D(e)});if(e[0].complete)D(e);else{p.empty();var b=(p.height()-104)/2,f=(p.width()-80)/2;a("\x3cimg\x3e").attr("src",x.staticImages.spinner).css({position:"relative",top:b+"px",left:f+"px"}).appendTo(p)}})}}function N(){var a=parseInt(O.index,10)+1;a>=ia.length||u.find("#ivVideo_"+a).click()}function P(){var a;
b.isDefined(ia)&&(a=ia[O.index]);if(b.isDefined(a)){J();var f=u.find("#ivLargeVideo").css("display","block");ea?(ea.isDetached()&&ea.attach(f[0]),b.loadMediaIntoAiry(ea,a,wa,x.tabletWeb),ea.show()):(ea=b.createAiryInstanceForChromeful(f,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&ea.bind("ended",N));ea.play({isAsync:!0})}}function c(){Q();var a;a="hero-image"===O.type?u.find("#ivHeroImage_"+O.index):"image"===O.type?u.find("#ivImage_"+O.index):"chromeful-video"===O.type||"chromeless-video"===O.type?
u.find("#ivVideo_"+O.index):"360-spin"===O.type?u.find("#iv360"):b.isDefined(ja)?u.find("#ivHeroImage_"+O.index):u.find("#ivImage_"+O.index);b.isjQueryObjDefined(a)||(a=u.find("#ivImage_0"));n(a)}function n(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(O.type="chromeful-video",O.index=a.attr("id").split("_")[1],P()):a.hasClass("ivHeroImage")?(O.type="hero-image",O.index=a.attr("id").split("_")[1],K(O.type)):a.hasClass("iv360Image")?(O.type="360-spin",
O.index=0,t()):(O.type="image",O.index=a.attr("id").split("_")[1],K(O.type))}function t(){J();u.find("#ivLarge360").css("display","block");M();var a=u.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);C();k.postCountMetric("dppc_click360");sa=Date.now()}function z(){0<sa&&(A("dppc_duration360",Date.now()-sa),sa=0)}function A(a,b){q.ue&&q.ue.count(a,b)}function C(){if(0<pa){var a=u.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function I(b,f){if(pa<b.length){var c=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:ra+"px"});c.hide();f.append(c);c.get(0).onload=function(){f.closest(document.documentElement).length&&(pa++,1===pa&&(C(),0<sa&&A("dppc_loadTime360",Date.now()-sa)),0<Ga&&A("dppc_perSpriteloadTime360",Date.now()-Ga),u.find("#iv360Spinner").hide(),c.show(),xa=5*U.imageLocations[Math.floor(ya/U.imageLocations[0].length)][ya%U.imageLocations[0].length],I(b,f))};c.attr("src",b[pa].replace(/(\._SP)\d+(,)\d+/,
"$1"+ta+"$2"+ua));Ga=Date.now()}}function w(a){if(b.isDefined(U.spriteWidthSizes)&&0<U.spriteWidthSizes.length){var f=U.spriteWidthSizes,c=f.length,e=f[0],d=f[c-1];if(a<=e)return e;if(a>d)return d;for(e=0;e<c;e++)if(a>f[e]&&a<=f[e+1])return f[e+1]}else return a}function M(){var b=u.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",
position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",x.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ha=!0,T())}function T(){if(b.isDefined(U.spriteURLs)&&b.isDefined(u)&&Ha&&!Ia){var c=u.find("#ivLarge360"),e=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,
display:"block"});b.isDefined(U.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",U.staticImages.hint360).appendTo(e);a("\x3cdiv\x3e").css({"text-align":"center"}).text(x.staticStrings.dragToSpin).appendTo(e);e.appendTo(c);var e=U.imageWidth,d=U.imageHeight,g=c.parent().width(),n=c.parent().height(),h=0,m=0;e/d>g/n?(ta=w(g),ua=Math.round(d/e*ta),na=Math.ceil(g),ra=Math.ceil(ua/ta*g),m=(n-ra)/2):(ua=w(n),ta=Math.round(e/d*ua),ra=Math.ceil(n),
na=Math.ceil(ta/ua*n),h=(g-na)/2);c.css({"margin-left":h,"margin-top":m,width:na+"px",height:ra+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*na+"px");I(U.spriteURLs,u.find("#image-360-sprites"),0);e=u.find("#ivLarge360");e.bind("mousedown",G);e.bind("touchstart",p);e.bind("touchmove",f);e.bind("touchend",F);a(document).bind("mousemove",B);a(document).bind("mouseup",H);b.isDefined(x.staticImages.grab)&&c.css("cursor","url('"+x.staticImages.grab+"'), auto");
Ia=!0}}function p(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function f(a){Ba&&(S(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function F(a){Ba&&(Ba=!1)}function G(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(x.staticImages.grabbing)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+x.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+x.staticImages.grabbing+"'), auto"));return!1}function B(a){Ca&&(S(a.originalEvent.clientX-
Ka),Ka=a.originalEvent.clientX)}function H(a){Ca&&(Ca=!1,b.isDefined(x.staticImages.grab)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+x.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function S(a){for(a=xa-=a/na*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var f;a=360;for(var c=0;c<pa;c++)for(var e=0;e<U.imageLocations[c].length;e++){var d=Math.abs(xa-5*U.imageLocations[c][e]);d<a&&(a=d,f=c*U.imageLocations[0].length+e)}f!==ya&&(a=Math.floor(f/U.imageLocations[0].length),
a!==Math.floor(ya/U.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),c=u.find("#image-360-sprites").children(),La.drawImage(c[a],0,0)),a=u.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=f;a=f%U.imageLocations[0].length*-1*na;f=-1*Math.floor(f/U.imageLocations[0].length)*ra;c=u.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+
f+"px, 0)");c.css("transform","translate3d("+a+"px, "+f+"px, 0)")}function V(){u.delegate(".ivThumb","click",function(){var b=a(this);n(b)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");O.type="chromeful-video";O.index=b.attr("id").split("_")[1];P()})}function W(){ea&&!ea.isDetached()&&(wa.volume=ea.getVolume(),ea.detach(),!document.all||q.atob||document.addEventListener||(ea=null));u.find("#ivLargeImage").empty();
z()}function R(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function Y(b){var f=qa.left-(b.pageX-Da[0])*Ea;g.capabilities.rtl&&(f=qa.left-(a(q).width()-b.pageX-Da[0])*Ea);b=qa.top-(b.pageY-Da[1])*Ea;f=R(f,Fa.left);b=R(b,Fa.top);u.find(".fullscreen").css({left:f,top:b})}function ga(){u.delegate("#ivLargeImage","click",function(a){if(Aa)y();else if(za){u.find(".fullscreen").removeAttr("style");if(za){var b=u.find("#ivLargeImage"),f=b.find(".fullscreen");Qa?b.css("cursor","url('"+x.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var c=u.find("#ivLargeImage");Fa.left=c.width()-f.width();Fa.top=c.height()-f.height();var c=b.height()/2,e=b.width()/2;Da=[b.offset().left+e,b.offset().top+c];qa.top=c-f.height()/2;qa.left=e-f.width()/2;f.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(f.height()/b.height(),f.width()/b.width())}Y(a)}});u.delegate("#ivLargeImage","mousemove",function(a){Aa&&Y(a)})}function ha(f){if(b.isImmersiveViewEnabled(x,
ba.getCurrentItem().color))if(Ma){var c=f.$event.originalEvent;c.acknowledge&&c.acknowledge(f.$currentTarget[0]);Pa=b.isDefined(f)&&"button-360-click"===f.action;e.isEnabled&&m.logImmersiveViewRequestServed(e);k.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(aa))aa.show();else{f=a("#auiImmersiveViewDiv");var c=a(q).height()-150,p=a(q).width()-75;aa=Ma.create(f,{name:"immersiveView",activate:"onclick",width:p,height:c,popoverLabel:"ImmersiveView",hideHeader:!0});f.click()}if(Na){u=a("#ivMain");
f=ba.getCurrentItem().color;ka=x.colorImages[f];ja=x.heroImage[f];ia=x.useChildVideos?x.colorToVideo[f]:x.videos;Oa=X()&&x.spin360ColorEnabled[f];U=X()?x.spin360ColorData[f]:fa;Q();ma=Z=oa=da=0;b.isDefined(ja)&&(Z=ja.length);b.isDefined(ka)&&(da=ka.length);b.isDefined(ia)&&(oa=ia.length);Oa&&(ma=1);d.populateTitle(u.find("#ivTitle"),45,x);d.populateVariationSelection(u.find("#ivVariationSelection"));f=u.find("#ivMediaSelect");0===da+ma||0===oa?(f.parent().hide(),u.find("#ivThumbs").addClass("noMediaSelection")):
(f.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(x.staticStrings.allMedia+" ("+(Z+da+ma+oa)+")").appendTo(f),a("\x3coption/\x3e").attr("value","images").text(x.staticStrings.images+" ("+(Z+da+ma)+")").appendTo(f),a("\x3coption/\x3e").attr("value","videos").text(x.staticStrings.videos+" ("+oa+")").appendTo(f),f.parent().show(),f.val("all"));f=u.find("#ivThumbs");f.find(".ivRow").not(".placeholder").remove();for(var c=Z+da+oa+ma,n=p=0;p<c;)for(var h=f.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(f),
l=0;3>l&&p<c;l++,p++,n++)if(n<Z){var t=ja[p].thumb,F=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+p).appendTo(h);F.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(t)+'") center no-repeat')}else if(n>=Z&&n<da+Z)t=ka[p-Z].thumb,F=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(p-Z)).appendTo(h),F.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(t)+
'") center no-repeat');else if(n>=Z+da&&n<da+Z+ma)F=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(h),F.find(".ivThumbImage").css("background",'url("'+(b.isDefined(x.staticImages.icon360)?d.getResizedThumbnailURL(x.staticImages.icon360,!0):"")+'") center no-repeat');else if(t=ia[p-da-Z-ma],F=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(p-da-Z-ma)).appendTo(h),F.find(".ivThumbImage").css("background",
'url("'+t.thumbUrl+'") center no-repeat'),b.isDefined(t)){var r={position:"triggerTop"},z=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");z.find(".ivVideoPopoverTitle").text(t.title);z.find(".ivVideoPopoverDuration").text(t.durationTimestamp);r.inlineContent=z[0];g.declarative.create(F,"a-tooltip",r)}f=u.find("#ivVideoList");f.find(".ivThumbVideoListOuter").not(".placeholder").remove();c=f.find(".placeholder");for(p=0;p<oa;p++)n=ia[p],h=c.clone().removeClass("placeholder").appendTo(f),
h.attr("id","ivVideoList_"+p),h.find(".ivThumbImage").css("background",'url("'+n.thumbUrl+'") center no-repeat'),h.find(".ivThumbTitle").text(n.title),h.find(".ivThumbDuration").text(n.durationTimestamp);u.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=x.airyConfig;Na=!1;Ra()}}else q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else k.postCountMetric("immersiveViewNotExistsClickCount")}function va(a){var f=
x.colorToAsin[a],c={},e=500;if(f&&f.asin){c.params={asin:f.asin};var d="360"+f.asin,p=Date.now();c.success=function(f){A("dppc_asyncRequestTime360",Date.now()-p);f&&b.isDefined(f.spin360.spin360Model)?(b.ajaxState(d,"success"),x.spin360ColorData[a]=f.spin360.spin360Model,a===ba.getCurrentItem().color&&(U=x.spin360ColorData[a],T())):c.error()};c.error=function(){k.postCountMetric("dppc_asyncFailed360");A("dppc_asyncRequestTime360",Date.now()-p);e*=2;16E3>=e?setTimeout(function(){p=Date.now();h.load("/gp/product/features/apparel-main-image/360.html",
c)},e):b.ajaxState(d,"fail")};b.ajaxState(d)&&"fail"!==b.ajaxState(d)||(h.load("/gp/product/features/apparel-main-image/360.html",c),b.ajaxState(d,"sent"))}}function X(){return b.isDefined(x.spin360ConfigEnabled)&&x.spin360ConfigEnabled}var ca,x,ba,la,aa,u,ja,ka,ia,Z,da,oa,ma,O,ea,wa,U,Oa,na,ra,ua,ta,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,sa=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;v.when("a-modal").execute(function(a){Ma=a});var Ra=
g.once(function(){L();V();ga();g.on("a:popover:afterUpdatePosition:immersiveView",E);g.on("a:popover:afterShow:immersiveView",c);g.on("a:popover:afterHide:immersiveView",W);l()});return function(f,c,p,n){ca=this;x=f;ba=c;e.refToModel=ba;la=n;X()&&(x.spin360ColorData[x.landingAsinColor]=x.spin360ColorData[x.defaultColor],x.spin360ColorEnabled[x.landingAsinColor]=x.spin360ColorEnabled[x.defaultColor]);b.isDefined(x.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
d.addStyleCodeToURL(x.staticImages.icon360,"_FMpng_RI_"));ca.render=function(a,f,c,e,d,p){Na=!0;X()&&x.spin360ColorEnabled[a]&&!b.isDefined(x.spin360ColorData[a])&&(x.spin360ColorData[a]={},va(a));b.isImmersiveViewEnabled(x,ba.getCurrentItem().color)&&X()&&x.spin360ColorEnabled[a]&&(f===x.maxAlts&&(a=e.find(".item.imageThumbnail"),c=e.find(".item.videoThumbnail"),b.isDefined(c)&&1<c.length?c.last().remove():a.last().remove(),f--),a=e.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
g.declarative.create(a,"button-360-click"),e.append(a),f++,k.postCountMetric("dppc_display360"));return f};ca.update=function(a){};b.isImmersiveViewEnabled(x,ba.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");la.register("imageClick",ha);la.register("button360Click",ha)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(g,a,b,h,k,e,m){function d(){var b=
L.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-m.getDimension(c,"padding-top")-m.getDimension(c,"padding-bottom");a("#iv-tab-view-container").css("height",b);J=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<J?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=c):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();
a("#iv-tab-view-container .iv-tab-content").css("height",b);g.trigger("dp:image-block:immersive-view:resize")}function r(){g.trigger("dp:image-block:immersive-view:reset")}function l(c){if(b.isImmersiveViewEnabled(E,L.getCurrentItem().color))if(N){var d=c.$event.originalEvent;d.acknowledge&&d.acknowledge(c.$currentTarget[0]);k.isEnabled&&e.logImmersiveViewRequestServed(k);h.postCountMetric("dppc_immersiveViewOpened");b.isDefined(c)&&("button-360-click"===c.action?a("#iv360TabHeading").click():"videoIngressClick"===
c.action?(K=c.clickTimeStamp,a("#ivVideosTabHeading").click()):"showroomIngressClick"===c.action?(K=c.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());d=L.getImmersiveViewModalInstance();if(b.isDefined(d))d.show();else{c=a("#auiImmersiveViewDiv");var d=Math.min(Math.max(a(q).height()-150,540),1080),m=Math.min(Math.max(a(q).width()-75,990),1980),d=N.create(c,{name:"immersiveView",activate:"onclick",width:m,height:d,popoverLabel:"ImmersiveView",hideHeader:!0});L.setImmersiveViewModalInstance(d);
c.click()}D&&(D=!1,P(),g.trigger("dp:image-block:immersive-view:init"))}else q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else h.postCountMetric("immersiveViewNotExistsClickCount")}var Q,E,L,y,D=!0,J=0,K,N;v.when("a-modal").execute(function(a){N=a});var P=g.once(function(){g.on("a:popover:afterUpdatePosition:immersiveView",d);g.on("a:popover:afterShow:immersiveView",d);g.on("a:popover:afterHide:immersiveView",
r)}),c=g.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(c){var e=b.filter(".iv-active");e.attr("id")!==a(this).attr("id")&&g.trigger("dp:ivTabs:"+e.find("a").attr("data-iv-tab-view")+":deselect",c);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();e=a(this).find("a").attr("data-iv-tab-view");a("#"+e).show();"ivVideosTab"===e&&(c.clickTimeStamp=K||c.timeStamp);g.trigger("dp:ivTabs:"+e+":select",
c);h.postCountMetric("dppc_"+e);return!1})});return function(a,e,d,g){Q=this;E=a;L=e;k.refToModel=L;y=g;Q.render=function(a,b,c,e,d,p){h.postCountMetric("dpcc_altThumbs_"+b);D=!0};Q.update=function(a){};Q.getTitle=function(){};Q.getVariationSelectionInfo=function(){};c();b.isImmersiveViewEnabled(E,L.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");y.register("imageClick",l);y.register("button360Click",l);b.useTabbedImmersiveView(E)&&(y.register("videoIngressClick",l),y.register("showroomIngressClick",
l))}});"use strict";v.when("A").register("ImageBlockLoader",function(g){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;g.ajax(a,b)}}});"use strict";v.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(g,a,b,h,k,e,m,d,r){function l(a){return null!==a&&"undefined"!==typeof a}function v(b){var f=0;a.each(b,function(a,b){var c=parseInt(b[1],10);c>f&&(f=c)});
return f}function E(b){var f=0;a.each(b,function(a,b){var c=parseInt(b[0],10);c>f&&(f=c)});return f}function L(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=v(a);0<a&&(b=Math.min(b,a));return b}function y(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=E(a);0<a&&(b=Math.min(b,a));return b}function D(b){var f;a.each(b,function(a,b){l(f)||(f=b[1]/b[0])});return f||1}function J(c,f,e,d,g,n,m,k,l,r,t,A,z){var E=a.extend({},e.foresterMetadataParams);null!==d&&(E.method+="."+d);var q=
[];f.disabledViewIds&&(q=f.disabledViewIds);return b.embed({parentElement:c[0],streamingUrls:f.url,contentId:f.mediaObjectId,contentMinAge:Number(f.minimumAge||"")||0,contentTitle:f.title,swfUrl:e.swfUrl,foresterMetadataParams:E,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:f.slateUrl,postMediaSlate:f.slateUrl},videoAds:e.videoAds,bindings:{play:function(){if("ImmersiveView"===d)C||(C=!0,h.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(I||(I=!0,h.postCountMetric("dppc_chromefulVideoPlayedPV")),
!r){var a=h.buildNexusMetric("ib.thumbnailClick",l,f.mediaObjectId,f.groupType,t,A,z);h.emitNexusMetric(a)}}},cuePoints:[{values:f.durationSeconds-1,type:"position",callback:function(a,b,f){g&&(K(0,n,k),N(m))}}],disabledViewIds:q})}function K(a,b,c){b.fadeTo(500,0,function(){P(a,c);b.fadeTo(500,1)})}function N(a){a&&a.toggle()}function P(b,c){var e=c.find("img");l(e[b])&&a(e[b]).click()}function c(a,b){T[a]=b?b:T[a];return T[a]}function n(b,c,e){e=e||M;e=e.colorImages;if(1>e.length||!l(e[b])||!l(c))return-1;
var d=-1;a.each(e[b],function(a,b){b.variant===c&&(d=a)});return d}function t(b,c,e){e=e||M;e=e.colorImages;return!(l(e)&&l(e[b])&&l(e[b][c])&&l(e[b][c].main))||1>a.map(e[b][c].main,function(a,b){return b}).length?-1:e[b][c]}function z(a,b,c,e){e.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?e.css("width",b/a*100+"%"):e.css("height",a/b*100+"%"))}function A(b,c){var e;if(e=b.useIV)e=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;m.isEnabled&&(m.IVApplicaple=e,d.logImmersiveViewApplicability(a,
m));return e}var C,I,w,M=a.extend(!0,{},k,e),T={};return{isDefined:l,isDefinedAndEmpty:function(a){return l(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return l(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return l(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:D,getMaxHeightOfMainImage:y,getMaxWidthOfMainImage:L,getMaxDimensionsOfMainImage:function(a,
b,c){if(c.acEnabled)return[b.height(),b.width()];var e=y(a,b,c);b=L(a,b,c);a=D(a);c=b/a;b=Math.min(b,e*a);e=Math.min(e,c);return[e,b]},getContainerHeight:function(a,b,c){var e=a.get(0);a=0;if(l(e)){a=e.offsetWidth/b;a=Math.min(a,c);var d;b=M.mainImageHeightPartitions;c=M.mainImageMaxSizes;if(l(c)&&l(b)){for(var g=0,h=q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=0;e<b.length;e++)h>b[e]&&(g=e+1);c.length>=g&&(d=c[g])}l(d)&&(a=Math.min(d[1],a))}return a},getColorFromState:function(b,
c){if(b){c=c||M;var e="";a.each(c.visualDimensions,function(a,c){b[c]&&(e+=" "+b[c])});return e&&e.substring(1)}},createThumbnail:function(a,b,c,e){var d=c.find(".template").clone().removeClass("template").addClass("item"),h=document.createElement("img");h.src=b;d.find(".placeHolder").replaceWith(h);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&d.addClass("heroImageThumbnail");l(e)&&d.addClass(e);g.declarative.create(d,"thumb-action",a);d.attr&&d.attr("data-ux-click","");c.append(d)},
selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,c,e,d,g,h,n){J(a,b,c,e,d,g,h,n,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:J,loadMediaIntoAiry:function(a,b,c,e){a&&a.getMediaSourceInfo()!==b.url&&(e?(w={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},
a.loadMedia(w)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:K,toggleVideoCaption:N,selectThumbnail:P,spinner:function(b,c){var e=a("#imageBlock .a-spinner").parent();
0===e.length&&(e=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),b.append(e),e.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?e.show():e.hide();return e},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+
a},ajaxState:c,getIndexForVariant:n,getImageHash:t,lazyLoadingRequired:function(a,b,e){b=Math.max(n(a.color,b.getCurrentItem().variant,e),0);b=-1!==t(a.color,b,e);a=e.colorToAsin[a.color]&&e.colorToAsin[a.color].asin;a=!a||"success"!==c(a);return!e.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:z,repositionVideoBanner:function(a,b,c,e){setTimeout(function(){var c=a.width()/a.height();z(c,16,9,b)},e||0)},getVideosCount:function(a,
b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!l(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return l(a)&&l(a[b])&&l(a[b].url)?a[b]:-1},isImmersiveViewEnabled:A,playVideoInImmersiveView:function(a,b){return A(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return l(w)?w.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,
b,c){return{requester:"DetailPageTablet",marketplaceID:c.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:c.languageCode,page:"DetailPageTablet",placement:"ImageBlock",video:{videoURL:c.url,imageURL:c.slateUrl}}},addTag:function(a){q.ue&&q.ue.tag&&q.ue.tag(a)},isShoppableScenesEnabled:function(){return r.isEnabled&&0<a(".mirai-scene-image-block-template").length}}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(g,a,b,h){function k(c,
e,d,g){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var k=D.getCurrentItem();if(!g||"chromeless-video"!==k.type||!y.autoplayVideo){g=0;if("hero-image"===k.type){g=m(k.color,k.variant);if(-1===g)return;g=-1!==g?g:0}var l=e+g;l>=d&&(g=0,l=e);e=h.getHeroImageHash(y,k.color,g);-1!==e&&(J.dispatch("updateModel",{data:{index:g,thumbnailIndex:l,variant:e.variant,type:"hero-image"}}),e=c.find(".item").get(l),b.selectGivenThumbnail(a(e),c))}}}function e(c,e,d){if("hero-video"===D.getCurrentItem().type)return c;
e=y.heroImage&&y.heroImage[e];var g=c;b.isDefined(e)&&(a.each(e,function(a,e){c<y.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:c,variant:e.variant},e.thumb,K,"imageThumbnail"),c++)}),k(K,g,c,d));return c}function m(c,e){var d=y.heroImage;if(1>d.length||!b.isDefined(d[c])||!b.isDefined(e))return-1;var g=-1;a.each(d[c],function(a,b){b.variant===e&&(g=a)});return g}function d(){if(N.length&&y.repositionHeroImage){var a=h.getHeroDimParams(y,D.getCurrentItem()),e;b.isDefined(a)&&
(e=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",N.css({"background-position":e,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function r(a,e,d,g){if(N.length&&a&&e){if("function"===typeof d||g){var m=new Image;m.onload=g?function(){N.css("background-image",'url("'+a+'")')}:d;m.src=a}d=e[1];var m=e[0],k;g||N.css({"background-image":'url("'+a+'")'});y.repositionHeroImage&&(e=h.getHeroDimParams(y,
D.getCurrentItem(),e),b.isDefined(e)&&(d=e.width,m=e.height,k=b.isDefined(e.xPos)?e.xPos+"px "+e.yPos+"px ":"center "+e.yPos+"px "));N.css({"background-position":k,"background-size":d+"px "+m+"px ","max-width":d+"px ","min-height":m+"px ",filter:"","-ms-filter":""})}}function l(b,e,d,g){b=h.getHeroImageHash(y,b,e);if(-1===b)return-1;e=a.map(b.main,function(a,b){return b})[0];r(e,b.main[e],d,g)}function q(a,b,e){if("hero-image"!==a.type)return-1;var d=m(a.color,D.getCurrentItem().variant),d=-1!==d?
d:0;if(-1===h.getHeroImageHash(y,a.color,d))return-1;var g=D.getCurrentItem();a.thumbnailIndex=g.thumbnailIndex;a.type=g.type;a.variant=g.variant;a.index=d;E(a,b,e)}function E(a,b,e){var d=h.getHeroImageHash(y,a.color,a.index),m;m=a&&P&&g.equals(a,P)?!0:!1;P||(P=a);if(!m&&a||b)l(a.color,a.index,b,e),P=a;N.removeClass("hide-background");g.trigger("dp:image-block:update",d)}var v,y,D,J,K,N,P={};return function(c,g,h,m){v=this;y=c;D=g;J=m;y.heroImage[y.landingAsinColor]=y.heroImage[y.defaultColor];v.render=
function(b,c,d,g,h,m,k){K=g;N=a("#heroImage");b=e(c,b,m);q(D.getCurrentItem(),k,m);return b};v.update=function(a){var e=a.data;"ingress"!==e.type&&N.addClass("hide-background");"swatchHover"===a.type?a.captured||(e.type=D.getCurrentItem().type,-1!==q(e)&&(a.captured=!0)):"hero-image"===e.type&&(E(e),"click"!==a.type&&y.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,K))};J.register("resize",d)}});"use strict";v.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",
function(g,a,b){var h,k,e,m;return function(a,r,l,q){h=this;k=a;e=q;h.render=function(a,e,d,l,r,q,v){m=l;h=this;d=k.maxAlts;l=e;r=k.colorImages[a]?k.colorImages[a].length:0;r+=b.getVideosCount(a,k);a=k.heroImage[a];q=0;a&&(q=a.length);a=r+q;a>d&&(d=a-d,a=m.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),d+="+",l={type:"ingress",index:0,thumbnailIndex:e,variant:""},a.find("#altIngressText").append(d),g.declarative.create(a,"thumb-action",
l),m.append(a),l=e++);return l};h.update=function(a){"ingress"===a.data.type&&"click"===a.type&&e.dispatch("imageClick",a)}}});"use strict";v.when("imageBlockUtils").register("ImageBlockState",function(g){return function(a,b,h){this.getImageHash=function(b){var e=h.getCurrentItem();b=g.getIndexForVariant(e.color,b||"MAIN",a);return g.getImageHash(e.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});
"use strict";v.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(g,a){function b(a,b){var d;if(b.repositionHeroImage){d=a[1];var g=a[0];if(768>=(q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,g*=.7;else{var h=((q.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,h=Math.max(Math.min(h,1),0);d*=.7+.3*h;g*=.7+.3*h}d=[d,g]}return d}function h(b,g,d){var h;if(d.repositionHeroImage){var l=q.innerWidth||
document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(a.isDefined(d)){h=Math.max((l-Math.min(1500,b))/2,0);var k=Math.max((l-b)/2,0);h-=k;l=Math.max(Math.min(l,1500),1024);h=h+(l-420-23)/2-b/g[1]*d}}return h}function k(b,h,d){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[h])&&a.isDefined(b[h][d])&&a.isDefined(b[h][d].main))||1>g.map(b[h][d].main,function(a,b){return b}).length?-1:b[h][d]}return{getHeroImageHash:k,getHeroDimParams:function(e,m,d){if(e.repositionHeroImage){if(!a.isDefined(d)){d=
k(e,m.color,m.index);if(-1===d)return;m=g.map(d.main,function(a,b){return b})[0];d=d.main[m]}m=b(d,e);e=h(m[0],d,e);return{height:m[1],width:m[0],xPos:e,yPos:75}}}}});"use strict";v.when("postMetric").register("ImageBlockImmersiveViewShowroom",function(g){function a(){this.render=function(){};this.update=function(){}}return function(b,h,k,e){var m=!1,d=new a;v.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(a){a!==fa&&(m=!0,d=new a(b,h,k,e))});b&&!0===b.showroomEnabled&&
!1===m&&g.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");return d}});"use strict";v.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(g,a,b){function h(a,h){var d=g.copy(a);if(b.isDefined(a)&&a.length>h){try{for(var k=-1,l=0;l<a.length;l++){var q=a.charAt(l);if(" "===q||"."===q||"?"===q||";"===q||","===q||":"===q)k=l;if(l===h-4){d=a.substring(0,-1===k?l:k);break}}}catch(v){d=a.substring(0,h-3)}d+="..."}return d}function k(a,b){var d=
a.lastIndexOf(".");return a="_"===a.charAt(d-1)?a.substring(0,d-1)+b+a.substring(d):a.substring(0,d)+"."+b+a.substring(d)}return{getDimension:function(a,b){var d=parseInt(a.css(b),10);return isNaN(d)?0:d},attachTabSelectHandler:function(a,b){g.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){g.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){g.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){g.off("dp:image-block:immersive-view:resize",
a)},attachImmersiveViewResetHandler:function(a){g.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:k,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var d="_AA50_";b&&(d+="FMpng_RI_");return k(a,d)},populateVariationSelection:function(e){if(b.isDefined(q.DetailPage)&&
b.isDefined(q.DetailPage.StateController)){e.empty();var g=q.DetailPage.StateController.getState(),d=g.variation_label_order,h;for(h in d)if(d.hasOwnProperty(h)){var k=d[h],v=g.selected_variations[k],k=g.variation_display_labels[k];v&&a("\x3cdiv/\x3e").addClass("ivVariations").text(k+":"+v).appendTo(e)}}},populateTitle:function(a,b,d){a.html(d.title);a.attr("title",a.text());a.html(h(d.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},
100,b)},logError:function(a,b,d,g){q.ueLogError&&q.ueLogError(g,{logLevel:a,attribution:b,message:d})}}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(g,a,b,h,k){function e(){k.populateTitle(t.find("#ivTitle"),160,c)}function m(){var a=n.getCurrentItem().color;A=c.colorImages[a];z=c.heroImage[a];C=I=0;b.isDefined(z)&&(C=z.length);b.isDefined(A)&&(I=A.length)}function d(a){return a.hiRes||a.large||
a.main[a.main.length-1]}function r(){var a=t.find("#ivStage").find("#ivLargeImage"),b=a.width(),e=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var g=d.width(),h=d.height();0<d.length&&(d[0].naturalWidth&&(g=d[0].naturalWidth),d[0].naturalHeight&&(h=d[0].naturalHeight));a.css("cursor","auto");var g=0===g?1:g,h=0===h?1:h,k=Math.min(b/g,e/h),m=h*k,l=g*k;1>k?(M?a.css("cursor","url('"+c.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor",
"zoom-in")),f=!0):f=!1;g=Math.min(l,g);h=Math.min(m-20,h);d.css({"margin-top":(e-h)/2,"margin-left":(b-g)/2,height:h,width:g});a.css("visibility","visible");p=!1}function l(a){var b=t.find("#ivLargeImage");b.css("visibility","hidden");b.empty();k.animateStageIn(b);b.append(a);r()}function q(e){t.find("#ivLargeImage").css("display","none");t.find("#ivLargeImage").css("display","block");var f;"hero-image"===e?b.isDefined(z)&&(f=d(z[w.index])):b.isDefined(A)&&(f=d(A[w.index]));if(b.isDefined(f)){t.find(".fullscreen").remove();
var g=a("\x3cimg\x3e").attr("src",f).addClass("fullscreen"),h=t.find("#ivLargeImage");k.animateStageOut(h,function(){g.load(function(){l(g)});if(g[0].complete)l(g);else{h.empty();var b=(h.height()-104)/2,e=(h.width()-80)/2;a("\x3cimg\x3e").attr("src",c.staticImages.spinner).css({position:"relative",top:b+"px",left:e+"px"}).appendTo(h)}})}}function v(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?w.type="hero-image":w.type="image";w.index=a.attr("id").split("_")[1];
q(w.type);h.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(w.index,10)+1)+"_"+(C+I))}function L(){t.delegate(".ivThumb","click",function(){var b=a(this);v(b)})}function y(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function D(a){var b=G.top-(a.pageY-H[1])*B;a=y(G.left-(a.pageX-H[0])*B,F.left);b=y(b,F.top);t.find(".fullscreen").css({left:a,top:b})}function J(){t.delegate("#ivLargeImage","click",function(a){if(p)r();else if(f){t.find(".fullscreen").removeAttr("style");if(f){var b=t.find("#ivLargeImage"),
e=b.find(".fullscreen");M?b.css("cursor","url('"+c.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));p=!0;var d=t.find("#ivLargeImage");F.left=d.width()-e.width();F.top=d.height()-e.height();var d=b.height()/2,g=b.width()/2;H=[b.offset().left+g,b.offset().top+d];G.top=d-e.height()/2;G.left=g-e.width()/2;e.css({position:"relative",left:G.left,top:G.top});B=Math.max(e.height()/b.height(),e.width()/b.width())}D(a);h.postCountMetric("dpcc_iv_largeImageCLick")}});
t.delegate("#ivLargeImage","mousemove",function(a){p&&D(a)})}function K(){t.find("#ivLargeImage").empty()}function N(c){if(T){t=a("#ivMain");m();w=n.getCurrentItem();e();k.populateVariationSelection(t.find("#ivVariationSelection"));c=t.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var d=C+I,f=0,g=0;f<d;)for(var h=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),l=0;4>l&&f<d;l++,f++,g++)if(g<C){var p=z[f].thumb,r=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+f).appendTo(h);r.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(p)+'") center no-repeat')}else g>=C&&g<I+C&&(p=A[f-C].thumb,r=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-C)).appendTo(h),r.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(p)+'") center no-repeat'));S();T=!1}else e();c=a("#ivImagesTab").height();t.css("height",c);d=t.find("#ivTitle").outerHeight(!0);f=t.find("#ivVariationSelection").outerHeight(!0);
g=t.find("#ivThumbs");h=k.getDimension(g,"margin-top")+k.getDimension(g,"margin-bottom");g.css("height",c-d-f-h);t.find("#ivLargeImage").css("height",c);c=t.find("#ivStage");d=t[0]&&t[0].getBoundingClientRect&&Math.floor(t[0].getBoundingClientRect().width)||t.width();c.css("width",d-k.getDimension(t,"padding-left")-k.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-k.getDimension(c,"margin-left")-k.getDimension(c,"margin-right"));w=n.getCurrentItem();c="hero-image"===w.type?t.find("#ivHeroImage_"+
w.index):"image"===w.type?t.find("#ivImage_"+w.index):b.isDefined(z)?t.find("#ivHeroImage_"+w.index):t.find("#ivImage_"+w.index);b.isjQueryObjDefined(c)||(c=t.find("#ivImage_0"));v(c)}var P,c,n,t,z,A,C,I,w,M=navigator.userAgent.match(/msie|trident/i),T=!0,p=!1,f=!1,F={},G={},B,H,T=!0,S=g.once(function(){L();J();k.attachImmersiveViewResizeHandler(N);k.attachTabDeselectHandler("ivImagesTab",K)});return function(b,e,d,f){P=this;c=b;n=e;P.render=function(b,c,e,d,f,g){T=!0;m();0===C+I?k.hideTabHeading("ivImagesTabHeading"):
k.unhideTabHeading("ivImagesTabHeading");1===C+I?a("#ivThumbs").hide():a("#ivThumbs").show()};P.update=function(a){};k.attachTabSelectHandler("ivImagesTab",N)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(g,a,b,h,k,e,m){function d(){A.delegate(".ivThumb","click",function(){var b=a(this);A.find(".ivThumb").removeClass("selected");b.addClass("selected");
b.hasClass("ivThumbVideo")&&(C.type="chromeful-video",C.index=b.attr("id").split("_")[1])})}function r(){if(ga){var b=a("#ivVideosTab").height();A.css("height",b);var c=A.find(".vse-lb-container");I=b-k.getDimension(c,"padding-top")-k.getDimension(c,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(V){A.css({"max-width":Math.floor(1.77*I)});return}var b=A.find(".vse-player-container"),c=A.find(".vse-video-action-strip"),e=A.find(".vse-lb-video-metadata"),d=Math.floor(I-k.getDimension(e,
"height")-k.getDimension(c,"height")),f=Math.floor(1.77*d);b.css({"max-height":d,"max-width":f,marginLeft:"auto",marginRight:"auto"});e.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}W&&(b=A.find(".vse-vertical-scroll"),c=k.getDimension(b,"margin-top")+k.getDimension(b,"margin-bottom"),b.css("max-height",I-c))}function l(){v();w&&w.pause();R=!1;H=!0;f=null;Y=!0;ga=!1}function v(){R=!1;w&&w.pause()}function E(c){f=c.clickTimeStamp?
c.clickTimeStamp:g.now();b.isDefined(z)&&(z.eventTimestamp=f);S&&(m.get(g,"#ivVideoBlock",t,x,ba),A=a("#ivVideoBlock"),n.getCurrentItem(),C=n.getCurrentItem(),fa());r();R=!0;S=!1;D()}function L(b){S&&(A=a("#ivVideoBlock"),n.getCurrentItem(),C=n.getCurrentItem(),fa());R&&D();r()}function y(a){w=a.player;h.postTimeMetric("vse_ib_desktop_player_initialisation_duration",g.now()-ha);c.imageBlockRenderingStartTime&&h.postTimeMetric("vse_ib_desktop_time_to_player_interactive",g.now()-c.imageBlockRenderingStartTime);
ga&&(N(),D())}function D(){if(w&&R&&(A.find(".vse-lb-container").animate({opacity:1},200),w.play(z),h.postCountMetric("dpcc_vse_videoBlock_video_played"),H)){var a=q.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,h.postTimeMetric("dpcc_vse_vitff",a),H=!1)}}function J(){g.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function K(a){M=a.popover.$popover;ga=!0;N()}function N(){ga&&Y&&R&&w&&(M.addClass(g.$(M).find(".vse-lb-container").data("cssClass")),g.trigger("vse:detailpage-imageblock:page:lightBoxOpened",
{lightBoxId:"ivVideoBlock",assetSpec:z}),r(),Y=!1)}var P,c,n,t,z,A,C,I,w,M,T,p,f,F,G,B,H=!0,S=!0,V=!1,W=!1,R=!1,Y=!0,ga=!1,ha=0,fa=g.once(function(){d();k.attachImmersiveViewResizeHandler(L);k.attachTabDeselectHandler("ivVideosTab",v);k.attachImmersiveViewResetHandler(l)}),X=function(e,d,f){a("#ivVideoBlockSpinner").addClass("aok-hidden");h.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);e=n.getCurrentItem().color;e=b.getVideoHash(e,0,c);w||(w=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),
e,c.airyConfig,"ImmersiveView"));V=!0;a("#ivVideoBlock").css({"max-width":1.77*I,margin:"0 auto"});R&&V&&w.play({isAsync:!0})},ca=function(b,c,e){S||m.get(b,"#ivVideoBlock",t,x,ba);a("#ivVideoBlockSpinner").addClass("aok-hidden")},x=function(a,b,c){W=!0;r()},ba=function(a,b,c){h.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,d,h,m){P=this;c=a;n=d;P.render=function(a,d,h,m,l,r){a=n.getCurrentItem().color;d=b.getVideoHash(a,
0,c);!0===r?T=c.mediaAsin:(T=c.colorToAsin[a]&&c.colorToAsin[a].asin,T=b.isDefined(T)?T:c.mediaAsin);p=null!==c.vseVideoDataSourceTreatment&&"T1"===c.vseVideoDataSourceTreatment?"ASIN":"physicalID";F=c.contentWeblab;G=c.contentWeblabTreatment;B=c.parentAsin||"";S=!0;-1===d?k.hideTabHeading("ivVideosTabHeading"):(k.unhideTabHeading("ivVideosTabHeading"),t={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:d.marketPlaceID,locale:d.languageCode,product:{contentID:T,contentIDType:"ASIN",
parentContentID:B,parentContentIDType:"ASIN"},video:{contentID:d.mediaObjectId,contentIDType:p,videoURL:d.url,imageURL:d.slateUrl},requestId:c.dpRequestId,weblabContext:[{name:F,assignment:G,ignoreForG2S2Key:!0}],metadata:{ProductTitle:c.title}},z={videoUrl:t.video.videoURL,contentId:t.video.contentID,duration:0,vendorCode:"",eventTimestamp:b.isDefined(f)?f:g.now(),imageUrl:t.video.imageURL,productAsin:t.product.contentID,index:0},b.isDefinedAndNotEmpty(w)&&(w.destroy(),w=null),ha=g.now(),e.get(g,
"#ivVideoBlock",t,ca,X))};P.update=function(a){};k.attachTabSelectHandler("ivVideosTab",E);g.on("vsePlayer-detailpage-imageblock",y);g.on("a:popover:afterShow:immersiveView",K);g.on("a:popover:beforeHide:immersiveView",J)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(g,a,b,h,k,e,m,d,r){function l(){var b=a("#iv360Tab").height();
B.css("height",b);var c=B.find("#ivTitle360").outerHeight(!0),e=B.find("#ivVariationSelection360").outerHeight(!0),d=B.find("#ivThumbs360"),f=m.getDimension(d,"margin-top")+m.getDimension(d,"margin-bottom");d.css("height",b-c-e-f);b=B.find("#ivStage360");c=B[0]&&B[0].getBoundingClientRect&&Math.floor(B[0].getBoundingClientRect().width)||B.width();b.css("width",c-m.getDimension(B,"padding-left")-m.getDimension(B,"padding-right")-B.find("#ivThumbColumn360").width()-m.getDimension(b,"margin-left")-m.getDimension(b,
"margin-right"))}function q(){D();var a=B.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});m.animateStageIn(a)},200);v()}function v(){if(0<u){var a=B.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function L(b,c){if(u<b.length){var d=a("\x3cimg /\x3e").css({display:"block",width:6*S+"px",height:V+"px"});d.hide();c.append(d);d.get(0).onload=function(){c.closest(document.documentElement).length&&(u++,1===u&&(v(),0<x&&(k.time("dppc_loadTime360",
Date.now()-x,f.mediaAsin),e.postTimeMetric("dppc_loadTime360",Date.now()-x))),0<ba&&(k.time("dppc_perSpriteloadTime360",Date.now()-ba,f.mediaAsin),e.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ba)),B.find("#iv360Spinner").hide(),d.show(),X=5*H.imageLocations[Math.floor(ca/H.imageLocations[0].length)][ca%H.imageLocations[0].length],L(b,c))};d.attr("src",b[u].replace(/(\._SP)\d+(,)\d+/,"$1"+R+"$2"+W));ba=Date.now()}}function y(a){if(b.isDefined(H.spriteWidthSizes)&&0<H.spriteWidthSizes.length){var c=
H.spriteWidthSizes,e=c.length,d=c[0],f=c[e-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<e;d++)if(a>c[d]&&a<=c[d+1])return c[d+1]}else return a}function D(){var b=B.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",
f.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),ha=!0,J())}function J(){if(b.isDefined(H.spriteURLs)&&b.isDefined(B)&&ha&&!va){var e=B.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(H.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",
H.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(f.staticStrings.dragToSpin).appendTo(d);d.appendTo(e);var d=H.imageWidth,g=H.imageHeight,h=e.parent().width(),k=e.parent().height(),m=0,l=0;d/g>h/k?(R=y(h),W=Math.round(g/d*R),S=Math.ceil(h),V=Math.ceil(W/R*h),l=(k-V)/2):(W=y(k),R=Math.round(d/g*W),V=Math.ceil(k),S=Math.ceil(R/W*k),m=(h-S)/2);e.css({"margin-left":m,"margin-top":l,width:S+"px",height:V+"px",overflow:"hidden",position:"relative"});e.children("#image-360-sprites").css("width",
6*S+"px");L(H.spriteURLs,B.find("#image-360-sprites"),0);d=B.find("#ivLarge360");d.bind("mousedown",c);d.bind("touchstart",K);d.bind("touchmove",N);d.bind("touchend",P);a(document).bind("mousemove",n);a(document).bind("mouseup",t);b.isDefined(f.staticImages.grab)&&e.css("cursor","url('"+f.staticImages.grab+"'), auto");va=!0}}function K(a){aa=!0;ga=a.originalEvent.targetTouches[0].clientX}function N(a){aa&&(z(a.originalEvent.targetTouches[0].clientX-ga),ga=a.originalEvent.targetTouches[0].clientX)}
function P(a){aa&&(aa=!1)}function c(a){la=!0;Y=a.originalEvent.clientX;b.isDefined(f.staticImages.grabbing)&&(a=B.find("#ivLarge360"),a.css("cursor","url('"+f.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+f.staticImages.grabbing+"'), auto"));return!1}function n(a){la&&(z(a.originalEvent.clientX-Y),Y=a.originalEvent.clientX)}function t(a){la&&(la=!1,b.isDefined(f.staticImages.grab)&&(a=B.find("#ivLarge360"),a.css("cursor","url('"+f.staticImages.grab+"'), auto"),
a.parents(".a-declarative").last().css("cursor","auto")))}function z(a){X-=a/S*180;ka&&(k.count("dppc_360dragToSpin",f.mediaAsin),e.postCountMetric("dppc_360dragToSpin"));ka=!1;for(a=X;0>a;)a+=360;for(;360<a;)a-=360;X=a;var c;a=360;for(var d=0;d<u;d++)for(var g=0;g<H.imageLocations[d].length;g++){var h=Math.abs(X-5*H.imageLocations[d][g]);h<a&&(a=h,c=d*H.imageLocations[0].length+g)}c!==ca&&(a=Math.floor(c/H.imageLocations[0].length),a!==Math.floor(ca/H.imageLocations[0].length)&&(b.isDefined(ja)||
(ja=document.createElement("canvas").getContext("2d")),d=B.find("#image-360-sprites").children(),ja.drawImage(d[a],0,0)),a=B.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ca=c;a=c%H.imageLocations[0].length*-1*S;c=-1*Math.floor(c/H.imageLocations[0].length)*V;d=B.find("#ivLarge360").children("#image-360-sprites");d.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");d.css("transform","translate3d("+a+"px, "+c+"px, 0)")}
function A(){if(Z){B=a("#ivMain360");var b=F.getCurrentItem().color;I()&&w(b);H=I()?f.spin360ColorData[b]:fa;m.populateTitle(B.find("#ivTitle360"),160,f);m.populateVariationSelection(B.find("#ivVariationSelection360"));B.find("#ivLarge360").empty();u=0;va=ha=!1;ca=X=0;da();Z=!1}0!==a("#iv360Tab").height()&&(m.detachImmersiveViewResizeHandler(A),l(),q(),x=Date.now(),ia=ka=!0,k.count("dppc_click360",f.mediaAsin),e.postCountMetric("dppc_click360"))}function C(a,c,g){a=f.colorToAsin[g];var m={},l=500;
if(!a||!a.asin)if(g===f.defaultColor)a={asin:f.winningAsin};else return;m.params={asin:a.asin};var n="360"+a.asin,p=Date.now();m.success=function(a){k.time("dppc_asyncRequestTime360",Date.now()-p,f.mediaAsin);e.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);a&&b.isDefined(a.spin360)?((a=a.spin360.spin360Model)&&d.setData(a),b.ajaxState(n,"success")):m.error()};m.error=function(){k.count("dppc_asyncFailedTransient360",f.mediaAsin);e.postCountMetric("dppc_asyncFailedTransient360");k.time("dppc_asyncRequestTime360",
Date.now()-p,f.mediaAsin);e.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);l*=2;16E3>=l?setTimeout(function(){p=Date.now();h.load("/gp/product/features/apparel-main-image/360.html",m)},l):(k.count("dppc_asyncFailed360",f.mediaAsin),e.postCountMetric("dppc_asyncFailed360"),b.ajaxState(n,"fail"))};b.ajaxState(n)&&"fail"!==b.ajaxState(n)||(h.load("/gp/product/features/apparel-main-image/360.html",m),b.ajaxState(n,"sent"))}function I(){return f&&b.isDefined(f.spin360ConfigEnabled)&&f.spin360ConfigEnabled}
function w(a){return b.isDefinedAndNotEmpty(f.spin360ColorData[a])?!0:b.isDefined(f.spin360LazyLoadEnabled)&&f.spin360LazyLoadEnabled}function M(){ia&&(k.time("dppc_duration360",Date.now()-x,f.mediaAsin),e.postTimeMetric("dppc_duration360",Date.now()-x),ia=!1)}function T(a){a=f.colorToAsin[a.color]&&f.colorToAsin[a.color].asin;a||(a=f.mediaAsin);return a}var p,f,F,G,B,H,S,V,W,R,Y,ga,ha=!1,va=!1,X=0,ca=0,x=0,ba=0,la=!1,aa=!1,u=0,ja,ka=!0,ia=!1,Z=!0,da=g.once(function(){m.attachImmersiveViewResizeHandler(A);
m.attachImmersiveViewResizeHandler(l);m.attachImmersiveViewResetHandler(M);m.attachTabDeselectHandler("iv360Tab",M)});return function(c,h,l,n){p=this;f=c;F=h;G=n;c=f.landingAsinColor;h=f.defaultColor;b.isDefined(f.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",m.addStyleCodeToURL(f.staticImages.icon360,"_FMpng_RI_"));I()&&(f.spin360ColorData||(f.spin360ColorData={}),c===h&&b.isDefinedAndEmpty(f.spin360ColorData[h])&&delete f.spin360ColorData[h]);
g.on(r.TWISTER_DATA_EVENT,function(a){T(F.getCurrentItem())===a&&(H=d.getData(a),J(),a={type:"updatedData",data:F.getCurrentItem()},G.dispatch("updateView",a))});p.render=function(c,h,l,n,p,r){Z=!0;!I()||b.isDefinedAndEmpty(f.spin360ColorData[c])&&!d.getData(T(F.getCurrentItem()))?m.hideTabHeading("iv360TabHeading"):(f.spin360ColorData[c]=d.getData(T(F.getCurrentItem())),b.isDefinedAndNotEmpty(f.spin360ColorData[c])?(a("#ivThumbs360").hide(),m.unhideTabHeading("iv360TabHeading"),b.isImmersiveViewEnabled(f,
F.getCurrentItem().color)&&I()&&w(c)&&(h===f.maxAlts&&(c=n.find(".item.imageThumbnail"),h=n.find(".item.videoThumbnail"),b.isDefined(h)&&1<h.length?h.last().remove():c.last().remove()),c=n.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),g.declarative.create(c,"button-360-click"),n.append(c),k.count("dppc_display360",f.mediaAsin),e.postCountMetric("dppc_display360"))):b.isDefined(f.spin360LazyLoadEnabled)&&f.spin360LazyLoadEnabled?(f.spin360ColorData[c]=
{},m.hideTabHeading("iv360TabHeading"),C(n,h,c)):m.hideTabHeading("iv360TabHeading"))};p.update=function(a){};m.attachTabSelectHandler("iv360Tab",A)}});v.register("nexusLogger360",function(){return{count:function(g,a){q.ue&&q.ue.event({asin:a,metricName:g,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(g,a,b){q.ue&&q.ue.event({asin:b,metricName:g,metricValue:a},"hit-360","hit360.clientEvent.3")}}});v.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});
v.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(g,a){var b={};return{setData:function(h){var k=h.asin;b[k]||(b[k]=h,g.trigger(a.TWISTER_DATA_EVENT,k))},getData:function(a){return b[a]}}});"use strict";v.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(g,a){v.register("vse_ns_preLoaderHook",function(){function b(h,k){try{var e=h.A,m=h.block,d=h.request,r=h.handleFailure,l=h.handleSuccess,q=e.$;k--;var v=3-k-1,L=e.now();e.ajax("/vap/ew/componentbuilder",
{params:d,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=e.now()-L;g.postTimeMetric("vse_preLoaderHook:success:",b);g.postCountMetric("vse_preLoaderHook:success:"+d.page+":"+d.placement+":"+v);q(m).html(a);l(e,d,a)},error:function(a){g.postCountMetric("vse_preLoaderHook:error:"+d.page+":"+d.placement+":"+v);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<k?b(h,k):(g.postCountMetric("vse_preLoaderHook:error:",
1),r(e,d,a))}})}catch(y){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",y)}}return{get:function(a,g,e,m,d){b({A:a,block:g,request:e,handleFailure:d,handleSuccess:m},3)}}});v.register("vse_ns_lazyLoaderHook",function(){function b(h,k,e){try{var m=h.A,d=h.context,r=h.handleFailure,l=h.handleSuccess;k.attr("data-configuration");var q=atob(k.attr("data-configuration")),v=JSON.parse(q),L={pageContext:d,configuration:v},y=m.now();e--;var D=3-e-1;m.ajax("/vap/ew/subcomponent/"+v.type,{params:L,
paramsFormat:"json",method:"post",contentType:"application/json",timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=m.now()-y;g.postTimeMetric("vse_lazyLoaderHook:success:",b);g.postCountMetric("vse_lazyLoaderHook:success:"+d.page+":"+d.placement+":"+v.type+":"+D);k.html(a);l(m,L,a)},error:function(a){g.postCountMetric("vse_lazyLoaderHook:error:"+d.page+":"+d.placement+":"+v.type+":"+D);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<e?b(h,k,e):(g.postCountMetric("vse_lazyLoaderHook:error:",
1),r(m,L,a))}})}catch(J){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",J)}}return{get:function(a,g,e,m,d){var r=a.$;r(g+" div[data-configuration]").each(function(){b({A:a,context:e,handleFailure:d,handleSuccess:m},r(this),3)})}}});v.register("vse_ns_videoPlayer",function(){function b(h,k,e){try{var m=h.A,d=h.block,r=h.request,l=h.handleFailure,q=h.handleSuccess,v=m.$;e--;var L=3-e-1,y=m.now();m.ajax("/vap/ew/subcomponent/vseplayer",{params:r,paramsFormat:"json",crossDomain:!0,method:"post",
contentType:"application/json",timeout:r.timeout||5E3,withCredentials:!0,success:function(a){var b=m.now()-y;g.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);g.postCountMetric("vse_lightPlayerLoaderHook:success:"+r.page+":"+r.placement+":"+L);v(d).html(a);q(m,r,a)},error:function(a){g.postCountMetric("vse_lightPlayerLoaderHook:error:"+r.page+":"+r.placement+":"+L);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<e?b(h,e):(g.postCountMetric("vse_lightPlayerLoaderHook:error:",
1),l(m,r,a))}})}catch(D){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",D)}}return{get:function(a,g,e,m,d){b({A:a,block:g,request:e,handleFailure:d,handleSuccess:m},3)}}})});"use strict";v.when("A","ImageBlockATF","ImageBlockBTF","imageBlockUtils","postMetric").execute(function(g,a,b,h,k){var e=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var a=b.colorImages,d=0,g;for(g in a)a[g]&&a[g].length&&(d+=a[g].length);a="image_size_bucket:gt"+e[e.length-1];for(g=1;g<e.length;g++)if(d<=
e[g]){a="image_size_bucket:"+e[g-1]+"-"+e[g];break}k.postCountMetric(a);h.addTag(a)})();(function(){var b=a.colorImages;b&&b.initial&&b.initial.length&&(b=b.initial.length,q.ue&&ue.count&&ue.count("altImageCount",b))})();(function(){var a=b.lazyLoadExperienceDisabled;h.isDefined(b.lazyLoadExperienceDisabled)&&!a&&(k.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),h.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});v.when("A","get-resource-time","postMetric","afterLoad").execute(function(g,
a,b){var h=g.state("desktop-landing-image-data");h&&(h=g.values(h),a=a.getResourceTimeByName("img",h),g.each(a,function(a){a&&(a.responseEnd!=fa&&b.postCountMetric("ibDesktopLandingImageDownloadTime",q.parseInt(a.responseEnd)),a.transferSize!=fa&&(0===a.transferSize?b.postCountMetric("ibDesktopLandingImageCached",1):(b.postCountMetric("ibDesktopLandingImageSizeInBytes",q.parseInt(a.transferSize)),b.postCountMetric("ibDesktopLandingImageNotCached",1))))}))});v.now().register("ImageBlockShoppableSceneView",
function(){function g(){}return function(){this.update=this.render=g}});v.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!1}})});
/* ******** */
(function(f){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,c=h?h("DetailPageShowroomImageBlockAssets",""):e;c.guardFatal?c.guardFatal(f)(c,window):c.execute(function(){f(c,window)})})(function(f,e,h){f.when("A","imageBlockUtils","imageBlockImmersiveViewUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(c,l,d,m,g,b,a){function e(a){a=
q.colorToAsin[a.color].asin;a||(a=q.mediaAsin);return a}var f=void 0,q=void 0,k=void 0,n=void 0,w=void 0,p=void 0,r=void 0;return function(d,h,u,v){u=new Date;f=this;q=d;k=h;n=v;c.on(b.TWISTER_DATA_EVENT,function(a){e(k.getCurrentItem())===a&&(a={type:"updatedData",data:k.getCurrentItem()},n.dispatch("updateView",a))});f.render=function(b,l,d,f,q,u){b=new Date;w=f;p=q.find("#main-showroom-container");p.parent().find("#showroom-canvas-caption");c.$("#main-image-container");try{var t=e(k.getCurrentItem());
if(m.isDataValidForAsin(t)){var y=new Date,h=m.getDataForAsin(t);g.refresh(n,h.asin,h.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-y);if(!u){var v=new Date;g.updateMainImage(p,h.imageData,n);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-v)}var x=new Date;l=g.createThumbnail(f,l,h.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-x);var z=new Date;c.$("#ivShowroomTabHeading").removeClass("aok-hidden");
a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-z);if(t!==r){var A=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var B=a.createShowroomAtfEvent(h.defaultStageId,t,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(B);r=t;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-A)}}else c.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(D){c.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,
new Date-b);return l};f.update=function(c){var r=new Date;try{var d=c.data;k.setCurrentEvent(c);if(d.type===b.SHOWROOM_THUMBNAIL_TYPE){var f=new Date;d.interaction=c.type;d.isUserGenerated=!0;if(m.isDataValidForAsin(e(d))){"mouseenter"===d.interaction&&d.type===b.SHOWROOM_THUMBNAIL_TYPE&&g.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER);var h=m.getDataForAsin(e(d)).imageData;g.updateMainImage(p,h,n);g.showShowroomMainImage(p)}q.usePeekHover&&"click"!==c.type||
(l.selectGivenThumbnail(c.$declarativeParent,w),"click"===c.type&&l.useTabbedImmersiveView(q)&&g.handleShowroomThumbnailClick(c));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-f)}else d.type!==b.SHOWROOM_MAIN_IMAGE_TYPE&&("swatchHover"===c.type?d.color===k.getCurrentItem().color&&k.getCurrentItem().type===b.SHOWROOM_THUMBNAIL_TYPE?g.showShowroomMainImage(p):g.hideShowroomMainImage(p):g.hideShowroomMainImage(p))}catch(C){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-r)};document.getElementById("ivShowroomTabHeading").addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=m.getDataForAsin(r).defaultStageId;b=a.createShowroomAtfEvent(b,r,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-u)}});"use strict";f.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";f.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants","showroom-atf-metrics").register("showroom-image-block-detail-page-rendering",function(c,l,d,f,g,b){function a(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);
var c=b.createShowroomAtfEvent(k,h,b.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(c);e(a)}function e(a){a.action="showroomIngressClick";a.data=n;m.dispatch("showroomIngressClick",a)}var h,m,k,n;return{createThumbnail:function(a,b,c){n={type:"showroomIngress",index:0,thumbnailIndex:b,variant:c.variant};d.createThumbnail({type:g.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:b,variant:c.variant},c.thumb,a,"showroom-imageblock-thumbnail");return b},updateMainImage:function(b,
d){var e=b.find("#showroom-main-image");e.length?e.attr("src",d.hiRes):(e=l("\x3cimg/\x3e").attr("src",d.hiRes).attr("id","showroom-main-image"),e.appendTo(b),c.declarative.create(b,"showroom-image-action",n),c.declarative("showroom-image-action",["click"],a),d=b.find("#showroom-main-image-overlay-container"),d.length||(d=f.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),e=f.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),d=l('                \x3cdiv id\x3d"showroom-main-image-overlay-container"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+
(e?e:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+d+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),d.appendTo(b)))},hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return l("#showroom-outer-container").hasClass("aok-hidden")},
handleShowroomIngressClick:e,handleShowroomThumbnailClick:function(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var c=b.createShowroomAtfEvent(k,h,b.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(c);e(a)},handleShowroomMainImageClick:a,refresh:function(a,b,c){m=a;h=b;k=c}}});"use strict";f.when("A").register("showroom-image-block-metrics",function(c){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",
IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select"},STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",
SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(c){try{if(e.ue&&c){var d=(e.ue.count(c)||0)+1;e.ue.count(c,d)}}catch(m){}},logValue:function(c,
d){try{e.ue&&c&&"number"===typeof d&&e.ue.count(c,d)}catch(m){}},createShowroomAtfEvent:function(e,d,f,g){var b={};b.showroomId=e;b.asin=d;b.eventType=f;b.status=g;b.device=c.capabilities?c.capabilities.isAmazonApp?"AmazonApp":c.capabilities.mobile?"mobile":c.capabilities.tablet?"tablet":"desktop":"";b.userAgent=navigator?navigator.userAgent:"";b.producerId="showroom_atf";b.schemaId="com.amazon.showroom.ingress.clientEvent.3";return b},logShowroomAtfEvent:function(c){try{e.ue&&e.ue.event&&c&&e.ue.event(c,
"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(d){}}}});"use strict";f.when("A","showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(c,e){function d(){return g[b]}function f(a){return a in g}var g={},b;return{setData:function(a){a&&a.asin&&a.imageDomain&&a.defaultCollageUrl&&a.defaultStageId&&Array.isArray(a.itemMainImagePhysicalIds)&&(b=a.asin,f(a.asin)||(g[a.asin]=a,c.trigger(e.TWISTER_DATA_EVENT,a.asin)))},getDataForCurrentAsin:d,getDataForAsin:function(a){return g[a]},
getStringValue:function(a){return d().displayStrings?d().displayStrings[a]:""},isDataValidForAsin:f}})});
/* ******** */
