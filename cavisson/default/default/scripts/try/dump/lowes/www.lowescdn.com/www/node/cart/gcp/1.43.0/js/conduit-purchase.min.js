function Conduit(){function e(e,t){t=t||"log",o&&("error"===t?console.error(e):console.log(e))}function t(t){return e(t,"error"),$.Deferred().reject(t)}var n={USER_COOKIE_NAME:"user",USER_GCP_COOKIE_NAME:"user-gcp",STORE_COOKIE_NAME:"sn",SHOPPING_CART_COOKIE:"SHOPPINGCART",AUTH_TOKEN_1_COOKIE:"authToken1",SSO_TOKEN_COOKIE:"SSOToken",WC_TOKEN_COOKIE:"WCToken",WC_TRUSTED_TOKEN_COOKIE:"WCTrustedToken",USER_SEGEMENT_COOKIE_NAME:"userSegment",GLOBAL_HANDLED_ERROR_CODES:[401],AUTH_ERROR_CODES:[401,403],INITIATE_CHECKOUT:"/checkout/%0/initiate?ordernow",BUY_NOW_PATH:"/checkout/ordernow"},o=!1,i={path:"/",secure:!0},r=this;return this.member={},this.cart={},this.get=function(e,t){t=t||{};var n=t.headers||{},o=$.extend({url:e,method:"GET",dataType:"json",headers:n},t);return $.ajax(o)},this.post=function(e,t,n){n=n||{};var o=n.headers||{},i=$.extend(!0,{url:e,method:"POST",dataType:"json",contentType:!1,headers:o},n);return t&&(i.contentType="application/json",i.data=JSON.stringify(t)),$.ajax(i)},this.member.getStoreNumber=function(){$.cookie(n.STORE_COOKIE_NAME)},this.member.get=function(){var e={},t={};try{e=JSON.parse($.cookie(n.USER_COOKIE_NAME))||{}}catch(o){e={}}try{t=JSON.parse($.cookie(n.USER_GCP_COOKIE_NAME))||{}}catch(o){t={}}var i=Object.keys(t),r=Object.keys(e);if(!r.length&&!i.length)return{};e.authToken1=$.cookie(n.AUTH_TOKEN_1_COOKIE)||e.authToken1||"",e.authToken2=e.SSOToken=$.cookie(n.SSO_TOKEN_COOKIE)||e.authToken2||"Guest",e.WCToken=$.cookie(n.WC_TOKEN_COOKIE)||e.WCToken||void 0,e.WCTrustedToken=$.cookie(n.WC_TRUSTED_TOKEN_COOKIE)||e.WCTrustedToken||void 0,e.storeNumber=$.cookie(n.STORE_COOKIE_NAME)||e.storeNumber||null,e.segment=$.cookie(n.USER_SEGEMENT_COOKIE_NAME)||e.segment||null;for(var s=0;s<i.length;s++)e[i[s]]=t[i[s]];return e.segment=t.segments&&t.segments[1],e},this.member.clearSession=function(e){var t=$.cookie(n.USER_ID_COOKIE),o="=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;";document.cookie="SHOPPINGCART+.www.lowes.com+%252F"+o,$.cookie(n.USER_COOKIE_NAME,null,i),$.cookie(n.SHOPPING_CART_COOKIE,null,i),$.cookie(n.USER_SEGEMENT_COOKIE_NAME,null,i),$.cookie(n.AUTH_TOKEN_1_COOKIE,null,i),$.cookie(n.SSO_TOKEN_COOKIE,null,i),$.cookie(n.WC_TOKEN_COOKIE,null,i),$.cookie(n.WC_TRUSTED_TOKEN_COOKIE,null,i),$.cookie(n.WC_USERACTIVITY_COOKIE+t,null,i),$.cookie(n.WC_AUTHENTICATION_COOKIE+t,null,i),$.cookie(n.WC_ACTIVEPOINTER_COOKIE,null,i),$.cookie(n.WC_SESSION_ESTABLISHED_COOKIE,null,i),$.cookie(n.USER_ID_COOKIE,null,i),amplify.store("organizationDetailsCache",null),"undefined"!=typeof e&&e()},this.cart.buyItemToCheckout=function(e,o,i,s,a){var c=n.BUY_NOW_PATH;if("string"!=typeof e&&"number"!=typeof e)return t(new Error("Conduit.cart.buyItemToCheckout(): itemId must be a string or number."));if("string"!=typeof o)return t(new Error("Conduit.cart.buyItemToCheckout(): quantity must be a string."));if("undefined"!=typeof i&&null!==i&&"string"!=typeof i)return t(new Error("Conduit.cart.buyItemToCheckout(): itemType must be a string."));if("undefined"!=typeof s&&null!==s&&"string"!=typeof s)return t(new Error("Conduit.cart.buyItemToCheckout(): fulfillmentType must be a string."));var u={omniItemId:e,quantity:o,itemType:i,fulfillmentType:s};return r.post(c,u,a)},this.cart.initiateCheckout=function(e,t){var o=n.INITIATE_CHECKOUT.replace("%0",e);return r.get(o,t)},this}window.conduit=new Conduit,function(e,t){function n(){var n={GENERIC_AJAX_ERROR_MESSAGE:"Something went wrong. Please try again.",GENERIC_ERROR_MESSAGE:"Something went wrong on our end. Please Try again in a little while.",GLOBAL_HANDLED_ERROR_CODES:[401],AUTH_ERROR_CODES:[401,403]},o={dev:{url:"https://tapply.syf.com/eapply/eapply.action?clientCode=LOWES&acptqsOffer=Y",js:"https://tapply.syf.com/eapply/resource/js/syfClient.js",css:"https://tapply.syf.com/eapply/resource/css/syfClient.css"},sit:{url:"https://uapply.syf.com/eapply/eapply.action?clientCode=LOWES&acptqsOffer=Y",js:"https://uapply.syf.com/eapply/resource/js/syfClient.js",css:"https://uapply.syf.com/eapply/resource/css/syfClient.css"},prod:{url:"https://apply.syf.com/eapply/eapply.action?clientCode=LOWES&acptqsOffer=Y",js:"https://apply.syf.com/eapply/resource/js/syfClient.js",css:"https://apply.syf.com/eapply/resource/css/syfClient.css"}},i={};return this.init=function(){e(document).on("click",".js-add-to-cart",this.addToCartInline)},this.appendSynchronyJS=function(e,t){var n=document.createElement("script");n.setAttribute("src",e),t&&(n.onload=t),document.body.appendChild(n)},this.appendSynchronyCSS=function(e,t){var n=document.createElement("link");n.setAttribute("href",e),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),t&&(n.onload=t),document.body.appendChild(n)},this.isSessionStorageEnabled=function(){return!(!window.sessionStorage||!window.sessionStorage.getItem)},this.getSynchronyData=function(){var e={};if(t.ui.isSessionStorageEnabled()){e=window.sessionStorage.getItem("syf")||"{}";try{e=JSON.parse(e)}catch(n){e={}}}else i.subId&&(e=i);return e},this.formatSdpExpiryDate=function(e){var t=e.slice(0,4),n=e.slice(4,6)-1,o=e.slice(6,8),i=e.slice(8,10),r=e.slice(10,12)-1,s=e.slice(12,14),a=null;try{a=new Date(t,n,o,i,r,s)}catch(c){console.log("sdpexpiry parameter was empty")}return a},this.validSynParams=function(e){var t=!1;return e&&e.ids&&e.ids.length&&e.sitecode&&e.bannercb&&"function"==typeof e.bannercb&&(t=!0),t},this.getEnvironment=function(){var e=window.location.href;return-1!==e.indexOf("www.lowes.com")?"prod":-1!==e.indexOf("sit")?"sit":"dev"},this.callOffersApi=function(n,o,i){e.ajax({url:"/cardoffers/offers/LAC",method:"GET",async:n,headers:{sitecode:o.sitecode},contentType:"application/json"}).done(function(e){i&&i(e)}).fail(function(e){var o=window.location.pathname;if((403===e.status||401===e.status)&&!n){t.ui.clearSynchronyData();var r="/u/login/password/confirm?redirect="+o;window.location.assign(r),window.reload()}console.log("offer api failed",e),i&&i(e)})},this.callSdpExtensionApi=function(n,o,i,r){var s="/cardoffers/offers/LAC/"+o;e.ajax({url:s,method:"GET",async:n,headers:{sitecode:i.sitecode},contentType:"application/json"}).done(function(e){r&&r(e)}).fail(function(e){var o=window.location.pathname;if((403===e.status||401===e.status)&&!n){t.ui.clearSynchronyData();var i="/u/login/password/confirm?redirect="+o;window.location.assign(i),window.reload()}console.log("offer SdpExtensionApi failed",e),r&&r(e)})},this.clearSynchronyData=function(){t.ui.isSessionStorageEnabled()&&window.sessionStorage.removeItem("syf"),i={}},this.storeSynchornyData=function(e){t.ui.isSessionStorageEnabled()?window.sessionStorage.setItem("syf",JSON.stringify(e)):i=e},this.callSynchornyMethod=function(e){syfClient({dApplyOpener:e.ids.length>1?e.ids:e.ids.toString(),dApplyUrl:t.ui.getSynchronyUrl.bind(this,e),closureCallback:function(){e.cb&&e.cb()}})},this.getSynchronyUrl=function(e){var n=t.ui.getEnvironment(),i=t.ui.getSynchronyData(),r=t.ui.isValidSynchronyData(i);if("callSDPExtension"===r){var s=i.offerId;t.ui.callSdpExtensionApi(!1,s,e,function(t){t.sitecode=e.sitecode,i=t})}else r===!1&&t.ui.callOffersApi(!1,e,function(t){t.sitecode=e.sitecode,i=t});return t.ui.clearSynchronyData(),o[n].url+"&siteCode="+i.sitecode+"&SDP="+i.sdp1},this.returnDeepValue=function(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:null},e)},this.isValidSynchronyData=function(n){if(n.subId){var o=new Date((new Date).getUTCFullYear(),(new Date).getUTCMonth(),(new Date).getUTCDate(),(new Date).getUTCHours(),(new Date).getUTCMinutes(),(new Date).getUTCSeconds()),i=t.ui.formatSdpExpiryDate(n.sdpExpiryTime),r=t.ui.returnDeepValue(window.dataLayer||{},"user.profile.profileInfo.identityID");if(null==r){var s=e.cookie("user-gcp")?JSON.parse(e.cookie("user-gcp")):null;r=s?s.identityId:null}if(r===n.subId&&null!=i&&o.getTime()-i.getTime()<0)return!0;if(r===n.subId&&null!=i&&o.getTime()-i.getTime()>0)return"callSDPExtension"}return!1},this.registerSynchorny=function(e){if(!t.ui.validSynParams(e))return void console.log("invalid Parameters");var n=t.ui.getSynchronyData(),o=t.ui.isValidSynchronyData(n);if(o===!0)t.ui.processSynchornyRegistration(e,n);else if("callSDPExtension"===o){var i=n.offerId;t.ui.clearSynchronyData(),n=t.ui.callSdpExtensionApi(!0,i,e,function(n){t.ui.processSynchornyRegistration(e,n)})}else t.ui.clearSynchronyData(),n=t.ui.callOffersApi(!0,e,function(n){t.ui.processSynchornyRegistration(e,n)})},this.processSynchornyRegistration=function(e,n){if("APPROVED"===n.decisionMessage){var i=t.ui.getEnvironment();t.ui.appendSynchronyJS(o[i].js,function(){t.ui.appendSynchronyCSS(o[i].css),n.sitecode=e.sitecode,t.ui.storeSynchornyData(n),t.ui.callSynchornyMethod(e),e.bannercb(!0)})}else e.bannercb(!1)},this.buyItem=function(o,i,r){var s=o.itemId?o.itemId:"",a=o.quantity?o.quantity:"",c=o.itemType?o.itemType:"",u=o.fulfillmentType?o.fulfillmentType:"",l={},d=!0,p=function(){t.member.clearSession(),window.AddToCart({items:[{productId:s,quantity:parseInt(a)}]},"pdp-atc")};l.global=!d,l={beforeSend:function(){Lowes.ErrorHandlers=e.extend(Lowes.ErrorHandlers,{error_401:function(){p()},error_403:function(){p()}})}},t.cart.buyItemToCheckout(s,a,c,u,l).done(function(e){var n=e.cartId;e.viewSize=i,initiateAjaxOptions={},t.cart.initiateCheckout(n,initiateAjaxOptions).done(function(){window.location="/checkout?ordernow"}).fail(function(e){window.location="/cart"})}).fail(function(t){n.AUTH_ERROR_CODES.includes(t.status)||-1!==n.GLOBAL_HANDLED_ERROR_CODES.indexOf(t.status)||e(".met-buy-now").find("button").after('<span class="trench clean"><i aria-hidden="true" class="icon-error-outline red"></i> '+n.GENERIC_ERROR_MESSAGE+"</span>")})},this.addToCartInline=function(t){t.preventDefault();var n=e(this),o=n.data("productid"),i=n.data("quantity")||1,r=n.data("collectionId"),s=0===e("#pdp-atc").length?"plp-atc":"pdp-atc";n.prop("disabled",!0),window.AddToCart({items:[{productId:o,quantity:i,collectionId:r}],flyout:!1},s,function(t){n.replaceWith('<span class="trench clean"><i class="icon-check-filled green" aria-hidden="true"></i> Item Added!</span>'),n.trigger("atc.success",e.extend({},t,{platform:t.showFlyout?1:0}))},function(t){var o=t&&t.response&&t.response.data;n.trigger("atc.failure",e.extend({},{xhr:{responseJSON:{errors:o}},text:"error"}));var i="Something went wrong on our end. Please Try again in a little while.",r=o&&o[0]||{};"CART_SERVICES_CART_MAX_ITEMS_LIMIT_EXCEEDED"===r.errorCode&&(i=r.errorMessage),n.replaceWith('<span class="trench clean"><i aria-hidden="true" class="icon-error-outline red"></i> '+i+"</span>")})},this}t.ui=new n}(jQuery,conduit),conduit.ui.init();